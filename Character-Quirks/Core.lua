local addonName = "Character Quirks"
local eventFrame = CreateFrame("Frame")
local quirkCooldowns = {}
local globalThrottle = 0
local lastEmoteTime = 0

-- CACHE WOW API FOR SPEED
local UnitName = UnitName
local UnitClass = UnitClass
local UnitRace = UnitRace
local UnitExists = UnitExists
local string_find = string.find
local GetTime = GetTime
local SendChatMessage = SendChatMessage
local math_random = math.random

-- OPTIMIZATION: Register quirks by event, not by list
local quirksByEvent = {}

print("|cffFFD700" .. addonName .. " loaded!|r Preparing to be silly...")

local racialQuirks = {

	Human = {
        { Name = "Defias Grudge", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 300, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Defias") end, Emote = "clenches their fist, a familiar anger rising at the sight of the Defias mask. \"For the fallen workers! For Stormwind!\"" },
		{ Name = "Human Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "sighs and looks at their hands, wondering: \"Am I living up to my potential? Or am I just... potentially average?\"" },
		{ Name = "Unyielding Potential", Event = "CHAT_MSG_SKILL", Chance = 15, Cooldown = 1800, Trigger = function(message) return string.find(message, "has increased to") end, Emote = "feels a surge of potential and briefly wonders if they could have been a farmer instead." },
		{ Name = "Diplomatic Immunity... Sort Of", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 900, Trigger = function() return UnitExists("target") and UnitIsFriend("player", "target") and not UnitIsPlayer("target") and not UnitIsUnit("target", "pet") end, Emote = function() return "gives " .. UnitName("target") .. " a friendly, diplomatic nod, as if negotiating a trade deal for slightly cheaper cheese." end },
		{ Name = "Varied Interests", Event = "GOSSIP_SHOW", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "gets a little too invested in the local gossip." },
		{ Name = "For the Alliance!", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 1800, Trigger = function() local _, _, _, _, _, _, _, instanceType = GetInstanceInfo(); return instanceType == "pvp" or instanceType == "arena" end, Emote = "takes a deep breath of battlefield air and feels a swell of pride for Stormwind." },
		{ Name = "Resource Management", Event = "TRADE_SHOW", Chance = 5, Cooldown = 300, Trigger = function() return true end, Emote = "carefully considers the trade, weighing every option with the gravity of a Stormwind noble." },
		{ Name = "Survivor's Instinct", Event = "PLAYER_REGEN_ENABLED", Chance = 10, Cooldown = 1200, Trigger = function() return UnitHealth("player") / UnitHealthMax("player") < 0.2 end, Emote = "wipes sweat from their brow, muttering, \"That was too close. Way too close.\"" }
	},
	Dwarf = {
        { Name = "Golem Inspector", Event = "PLAYER_TARGET_CHANGED", Chance = 35, Cooldown = 600, Trigger = function() local n = UnitName("target"); return n and (string.find(n, "Golem") or string.find(n, "Construct")) end, Emote = "squints and critiques the construct's craftsmanship. \"Hmph. The riveting is sloppy. I've seen better work on a goblin's outhouse.\"" },
		{ Name = "Dwarf Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "strokes their beard thoughtfully, wondering: \"Is my beard magnificent enough? It feels... adequate. ADEQUATE IS NOT GOOD ENOUGH.\"" },
		{ Name = "Beard Contemplation", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "absent-mindedly strokes their beard, pondering the mysteries of the universe and the quality of the local ale." },
		{ Name = "For Khaz Modan!", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "bellows, \"For Ironforge!\" and stomps their foot, ready for a proper brawl." },
		{ Name = "Archeological Interest", Event = "QUEST_ACCEPTED", Chance = 25, Cooldown = 1200, Trigger = function(quest) return string.find(quest, "Titan") or string.find(quest, "Uldaman") or string.find(quest, "artifact") end, Emote = "eyes gleam with excitement at the prospect of unearthing ancient history." },
		{ Name = "Ale Aficionado", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 300, Trigger = function() return UnitName("target") == "Innkeeper" end, Emote = "leans over the counter and asks, \"Right, what's on tap? Bring me yer finest!\"" },
		{ Name = "Stoneform Prep", Event = "UNIT_AURA", Chance = 20, Cooldown = 1800, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if type(auraName) == "string" and (string.find(auraName, "Poison") or string.find(auraName, "Disease")) then return true; end end return false; end, Emote = "grumbles about pesky debuffs and feels the urge to turn to stone to shrug it off." },
		{ Name = "Straight Talk", Event = "QUEST_COMPLETE", Chance = 15, Cooldown = 600, Trigger = function() return true end, Emote = "accepts the reward with a curt nod, seeing the flowery words of thanks as unnecessary fluff." }
	},
	Gnome = {
		{ Name = "Gnome Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "nervously adjusts their goggles, thinking: \"Did I overtighten that bolt? The whole world could unravel because of one overtightened bolt.\"" },
		{ Name = "Invention Inspiration", Event = "UNIT_DIED", Chance = 15, Cooldown = 900, Trigger = function(_, unit) if UnitIsMechanical(unit) and UnitIsEnemy(unit,"player") then return true end return false end, Emote = "begins frantically sketching a design on a spare napkin, inspired by the defunct machine." },
		{ Name = "Puntability Assessment", Event = "PLAYER_UNGHOST", Chance = 20, Cooldown = 3600, Trigger = function() return true end, Emote = "lands with a thud and mutters, \"I probably could have aimed for a softer bush.\"" },
		{ Name = "Technobabble", Event = "QUEST_DETAIL", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "skims the quest text and mutters, \"I could probably optimize this process by recalibrating the primary McGuffin with a torque wrench!\"" },
		{ Name = "Escape Artist Practice", Event = "SWIM_START", Chance = 5, Cooldown = 300, Trigger = function() return true end, Emote = "gets tangled in a bit of seaweed and instinctively prepares to use their escape artist skills." },
		{ Name = "For Gnomeregan!", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 1200, Trigger = function() return true end, Emote = "yells in a surprisingly high-pitched battlecry, \"For science and Gnomeregan!\"" },
		{ Name = "Size Overcompensation", Event = "MOUNT_START", Chance = 25, Cooldown = 600, Trigger = function() local _,_,_,_,_,_,_,_,isFlying = GetUnitSpeed("player"); if isFlying then return false end; local scale = UnitScale("player"); local mountScale = UnitScale("mount"); return mountScale and scale and mountScale > scale*2 end, Emote = "puffs out their chest, clearly proud of their impressively large mount." },
		{ Name = "Gnome Engineering", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 300, Trigger = function() return UnitName("target") == "Engineering Trainer" end, Emote = "leans in close, eager to learn the latest engineering techniques." },
		{ Name = "Gnome Pride", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "Gnomeregan" or z == "Dun Morogh" end, Emote = "stands tall and proud, ready to defend their home at a moment's notice." }
	},
	["NightElf"] = {
        { Name = "Satyr's Shame", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 600, Trigger = function() return UnitCreatureType("target") == "Demon" and string.find(UnitName("target"), "Satyr") end, Emote = "recoils with a mix of pity and disgust. \"A twisted mockery of what you once were. A sorrow for the Kaldorei.\"" },
		{ Name = "Night Elf Anxiety", Event = "AFK", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "lets their ears twitch slightly, pondering: \"I've lived for a thousand years and I *still* don't know what I'm doing tomorrow.\"" },
		{ Name = "Tree-mendous Interest", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 1200, Trigger = function() local n = UnitName("target"); return n and (string.find(n, "Ancient", 1, true) or string.find(n, "Treant", 1, true)) end, Emote = "gazes up at the Ancient with a deep, spiritual reverence... and a hint of jealousy." },
		{ Name = "Whispers of the Wisps", Event = "PLAYER_DEAD", Cooldown = -1, Trigger = function() return true end, Emote = "feels a strange comfort in the presence of the wisps, as if they are among old friends." },
		{ Name = "Elune's Guidance", Event = "ZONE_CHANGED_NEW_AREA", Chance = 15, Cooldown = 900, Trigger = function() local _, _, difficulty, _, _, _, _, _, isOutdoor = GetInstanceInfo(); return isOutdoor and not IsDay() end, Emote = "looks up at the moon and feels a calming presence wash over them." },
		{ Name = "Patient Observation", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "becomes unnervingly still, blending into the shadows as if they've done this for a thousand years." },
		{ Name = "Ancient Grudge", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 1800, Trigger = function() local _,c=UnitClass("target"); return c=="MAGE" and UnitFactionGroup("target")=="Horde" end, Emote = function() return "narrows their eyes at " .. UnitName("target") .. ", a flicker of ancient animosity passing through them." end },
		{ Name = "Nature's Reclamation", Event = "UNIT_DIED", Chance = 5, Cooldown = 600, Trigger = function() return true end, Emote = "looks at the corpse and briefly imagines a small flower growing over it." }
	},
	Draenei = {
		{ Name = "Draenei Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "looks to the sky, worried: \"My Naaru-given purpose is probably very important. I hope I haven't missed the email.\"" },
		{ Name = "Naaru's Wisdom", Event = "QUEST_COMPLETE", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "inclines their head, whispering, \"The Light has guided my path to this conclusion.\"" },
		{ Name = "Crystal Resonance", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 1200, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Crystal", 1, true) end, Emote = "places a hand on the crystal, feeling a faint, familiar hum." },
		{ Name = "Tail Wag", Event = "ACHIEVEMENT_EARNED", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "can't suppress a happy little tail wag." },
		{ Name = "Spacefarer's Sigh", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local _,z=GetZoneText(); return z == "The Exodar" or z == "Azuremyst Isle" end, Emote = "takes a deep breath and sighs, a mix of nostalgia and sadness for a world they can never return to." },
		{ Name = "Hero's Pose", Event = "PLAYER_REGEN_ENABLED", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "strikes a brief, heroic pose after the battle, as if posing for a celestial portrait." },
		{ Name = "Gift of Language", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "listens intently, their accent becoming slightly more pronounced as they focus." }
	},
	Worgen = {
		{ Name = "Worgen Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "stiffens up, thinking with embarrassment: \"Did I just growl at the mailman? Oh, I definitely did.\"" },
		{ Name = "Sniff Test", Event = "PLAYER_TARGET_CHANGED", Chance = 25, Cooldown = 300, Trigger = function() return UnitExists("target") end, Emote = "subtly sniffs the air in their target's direction, gathering information." },
		{ Name = "Barely Contained Beast", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "lets out a low growl, the beast within eager for the fight." },
		{ Name = "Gilnean Decorum", Event = "TRADE_SHOW", Chance = 40, Cooldown = 300, Trigger = function() return true end, Emote = "attempts to maintain a stiff upper lip and a sense of Gilnean formality, despite their feral appearance." },
		{ Name = "The Curse Lingers", Event = "PLAYER_UPDATE_RESTING", Chance = 15, Cooldown = 900, Trigger = function() return IsResting() end, Emote = "paces restlessly for a moment before settling down, the curse never truly letting them be at peace." },
		{ Name = "Running Wild", Event = "MOUNT_START", Chance = 20, Cooldown = 1200, Trigger = function() return GetShapeshiftFormID() > 0 end, Emote = "snorts, preferring to run on all fours than rely on some beast of burden." },
		{ Name = "Territorial", Event = "QUEST_ACCEPTED", Chance = 15, Cooldown = 600, Trigger = function(quest) return string.find(quest, "defend") or string.find(quest, "protect") end, Emote = "accepts the task with a fierce sense of territorial duty." }
	},
	Pandaren = {
		{ Name = "Pandaren Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "pats their softly rumbling stomach, wondering: \"The path to inner peace is long. I wonder if it has snack carts.\"" },
		{ Name = "Snack Time", Event = "PLAYER_REGEN_ENABLED", Chance = 25, Cooldown = 300, Trigger = function() return true end, Emote = "decides the battle was good exercise, and now it's time for a dumpling. Or seven." },
		{ Name = "Inner Peace", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "closes their eyes and takes a deep, centering breath. The world can wait." },
		{ Name = "Slow Down", Event = "QUEST_DETAIL", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "reads the quest text slowly and deliberately, reminding themselves that life is a journey to be savored." },
		{ Name = "A Good Brew", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 300, Trigger = function() return UnitName("target") == "Innkeeper" or UnitName("target") == "Brewer" end, Emote = "inquires about the local brews with the serious air of a true connoisseur." },
		{ Name = "Bouncy", Event = "JUMP", Chance = 15, Cooldown = 120, Trigger = function() return IsFalling() end, Emote = "tucks into a ball, preparing for a soft and bouncy landing." },
		{ Name = "Wise Words", Event = "CHAT_MSG_EMOTE", Cooldown = 900, Trigger = function(e, p) return (string.find(e, "asks", 1, true) or string.find(e, "ponders", 1, true)) and p~=UnitName("player") end, Emote = "offers a simple proverb in response, such as, \"A single grain of rice can tip the scale.\"" }
	},

	Orc = {
		{ Name = "Orc Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "cracks their knuckles, pondering: \"Am I honorable enough? Is yelling 'For the Horde!' a valid answer to every problem? I think so.\"" },
        { Name = "Warrior's Pride", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "lets out a fierce battle cry, \"For the Horde!\" even if the enemy is just a squirrel." },
        { Name = "Grunt's Duty", Event = "UNIT_DIED", Chance = 10, Cooldown = 300, Trigger = function(_, unit) return UnitIsPlayer(unit) and UnitFactionGroup(unit) ~= UnitFactionGroup("player") end, Emote = "stands over the fallen foe and grunts, \"Another one bites the dust.\"" },
        { Name = "Warchief's Blessing", Event = "ZONE_CHANGED_NEW_AREA", Chance = 15, Cooldown = 900, Trigger = function() local z=GetZoneText(); return z == "Durotar" or z == "Orgrimmar" end, Emote = "feels a surge of pride for their homeland and gives a nod to the Warchief." },
		{ Name = "Lok'tar Ogar!", Event = "PLAYER_REGEN_DISABLED", Chance = 25, Cooldown = 600, Trigger = function() return true end, Emote = "lets out a gutteral cry, \"For the Horde!\" even though the enemy is just a single, terrified boar." },
		{ Name = "Work is Da Poop!", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 1200, Trigger = function() return UnitName("target") == "Peon" end, Emote = "yells, \"WORK, WORK!\" before realizing that's not their job." },
		{ Name = "Blood Fury", Event = "UNIT_DIED", Chance = 15, Cooldown = 300, Trigger = function() return UnitIsPlayer("target") and UnitFactionGroup("target")~=UnitFactionGroup("player") end, Emote = "feels the thrill of battle and lets out a victorious roar over their fallen foe." },
		{ Name = "Honor Above All", Event = "QUEST_COMPLETE", Chance = 20, Cooldown = 900, Trigger = function() return true end, Emote = "accepts the reward with a nod, weighing the honor gained more than the gold." },
		{ Name = "Spike Appreciation", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "examines their new gear and mutters, \"Could use more spikes.\"" },
		{ Name = "Not That Kind of Orc", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 1800, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Fool") end, Emote = "grunts, annoyed at the implication. Me not that kind of orc!" }
	},
	Scourge = {
        { Name = "Scarlet Scorn", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 300, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Scarlet") end, Emote = "lets out a low, rattling hiss. The sight of the Scarlet flame fills the empty void in their chest with pure, unadulterated hatred." },
		{ Name = "Undead Anxiety", Event = "JUMP", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "pats their arm reassuringly after landing. \"Is that my arm? No, wait, that one's mine. Phew. Always have to check.\"" },
		{ Name = "Skeletal Readjustment", Event = "JUMP", Chance = 25, Cooldown = 300, Trigger = function() return true end, Emote = "lands with a series of unsettling pops and cracks, then takes a moment to make sure everything is still attached." },
		{ Name = "Apathy Overload", Event = "QUEST_COMPLETE", Chance = 5, Cooldown = 600, Trigger = function() return true end, Emote = "stares blankly at the quest giver, completely devoid of emotion. Another task done. So it goes." },
		{ Name = "Will of the Forsaken", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 1200, Trigger = function() return true end, Emote = "feels a surge of grim resolve, their unliving will pushing them forward." },
		{ Name = "Dark Lady's Watch", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 3600, Trigger = function() local z=GetZoneText(); return z == "Tirisfal Glades" or z == "Undercity" end, Emote = "feels a flicker of what might be pride for the Dark Lady's kingdom of filth and bone." },
		{ Name = "Questionable Appetite", Event = "UNIT_DIED", Chance = 10, Cooldown = 900, Trigger = function(_, unit) local t=UnitCreatureType(unit); return t == "Humanoid" or t == "Undead" end, Emote = "eyes the fresh corpse with a flicker of... culinary curiosity." },
		{ Name = "Spare Parts", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 1800, Trigger = function() return UnitName("target") == "Abomination" end, Emote = "eyes the Abomination and wonders if they have any spare parts they could borrow." }
	},
	Tauren = {
        { Name = "Quilboar Annoyance", Event = "PLAYER_TARGET_CHANGED", Chance = 35, Cooldown = 180, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Quilboar") end, Emote = "lets out a weary sigh and scrapes a hoof against the ground. The endless plague of thorns is a test of even the Earth Mother's patience." },
		{ Name = "Tauren Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "blinks slowly, feeling a great sense of peace, which makes them anxious that they're missing something to worry about." },
        { Name = "Hoofed Harmony", Event = "UNIT_AURA", Chance = 20, Cooldown = 300, Trigger = function(unit) return unit == "player" and IsResting() end, Emote = "stretches their legs and feels a deep connection to the earth beneath their hooves." },
        { Name = "Ancestral Guidance", Event = "PLAYER_REGEN_DISABLED", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "calls upon the spirits of their ancestors for strength in battle." },
		{ Name = "Earth Mother's Blessing", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "pats the ground thankfully, giving respect to the Earth Mother for the victory." },
		{ Name = "Careful Steps", Event = "ZONE_CHANGED_INDOORS", Chance = 40, Cooldown = 300, Trigger = function() return true end, Emote = "ducks their head and carefully navigates the doorway, ever mindful of their horns." },
		{ Name = "Plainsrunning", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 1200, Trigger = function() local z=GetZoneText(); return z == "Mulgore" or z == "The Barrens" end, Emote = "takes a deep breath of the plains air and feels the urge to run free." },
		{ Name = "Peaceful Soul", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 600, Trigger = function() local t=UnitCreatureType("target"); return t == "Critter" end, Emote = function() return "gives the small creature a gentle, peaceful nod before moving on." end },
		{ Name = "Respect for the Elders", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 300, Trigger = function() local t=UnitClassification("target"); return t == "elite" or t == "worldboss" end, Emote = "listens with great respect and deference." },
		{ Name = "War Stomp Practice", Event = "JUMP", Chance = 10, Cooldown = 300, Trigger = function() return not IsFalling() end, Emote = "lands with a particularly satisfying THUD." }
	},
	Troll = { 
		{ Name = "Troll Anxiety", Event = "AFK", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "sways gently on their feet. \"The spirits are talkin' to me... I hope they're not just askin' for directions.\"" },
        { Name = "Trollish Humor", Event = "CHAT_MSG_SAY", Chance = 20, Cooldown = 600, Trigger = function(message) return string.find(message, "troll", 1, true) end, Emote = "chuckles to themselves, thinking: \"I guess you could say I'm a bit of a... troll.\"" },
        { Name = "Regeneration Meditation", Event = "UNIT_HEALTH", Chance = 5, Cooldown = 300, Trigger = function(unit) return unit == "player" and UnitHealth(unit) < UnitHealthMax(unit) end, Emote = "sits down and meditates for a moment, feeling the regenerative powers of the Loa." },
		{ Name = "Voodoo Shuffle", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 600, Trigger = function() return true end, Emote = "does a little voodoo shuffle, pleased with the outcome of the fight." },
		{ Name = "Stay Away From Da Voodoo", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 900, Trigger = function() return true end, Emote = "gives the NPC a sly look, making sure they aren't trying to pull a fast one." },
		{ Name = "Taz'dingo!", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 1200, Trigger = function() return true end, Emote = "yells 'Taz'dingo!' and gets ready for a fight, mon." },
		{ Name = "Loa Whispers", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "seems to be listening to voices nobody else can hear." },
		{ Name = "Regeneration Itch", Event = "UNIT_AURA", Chance = 5, Cooldown = 300, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if auraName then return true; end end return false; end, Emote = "scratches an arm as new skin knits together with an oddly satisfying itch." },
		{ Name = "Island Time", Event = "ZONE_CHANGED_NEW_AREA", Chance = 15, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "Echo Isles" or z == "Stranglethorn Vale" end, Emote = "relaxes their posture, feeling right at home in the jungle." }
	},
	["BloodElf"] = {
		{ Name = "Blood Elf Anxiety", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "discreetly checks their reflection. \"My hair is perfect. But is it... too perfect? Does it betray my inner turmoil?\"" },
        { Name = "Mana Addiction", Event = "UNIT_POWER_UPDATE", Chance = 20, Cooldown = 600, Trigger = function(unit, powerType) return unit == "player" and powerType == "MANA" end, Emote = "feels a slight tingle of pleasure as their mana regenerates." },
        { Name = "Arcane Intellect", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 1200, Trigger = function(_, _, spellID) return spellID == 1459 end, Emote = "feels a surge of intellect and briefly considers writing a novel about their life." },
        { Name = "Elegant Posture", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 20, Cooldown = 300, Trigger = function(slot) return slot == "ChestSlot" end, Emote = "stands up a little straighter after equipping their new chestpiece." },
		{ Name = "Fabulous Hair", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 5, Cooldown = 300, Trigger = function(slot) return slot == "HeadSlot" end, Emote = "spends a moment adjusting their hair after equipping the new headpiece." },
		{ Name = "Arcane Thirst", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() return UnitPowerType("target") == 0 end, Emote = "gets a faint, hungry look in their eyes when targeting a mana-user." },
		{ Name = "For Quel'Thalas!", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 1200, Trigger = function() return true end, Emote = "sneers, \"For the glory of Quel'Thalas!\"" },
		{ Name = "Effortless Superiority", Event = "QUEST_COMPLETE", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "accepts the reward with an air of boredom, as if the task was barely a challenge." },
		{ Name = "Critique of the Masses", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "Orgrimmar" end, Emote = "looks around at the rustic architecture of Orgrimmar and sighs dramatically." },
		{ Name = "Remember the Sunwell", Event = "PLAYER_UPDATE_RESTING", Chance = 10, Cooldown = 3600, Trigger = function() return IsResting() end, Emote = "feels the power of the Sunwell coursing through them and allows a rare, small smile." }
	},
	Goblin = {
        { Name = "Profit Prophet", Event = "PLAYER_TARGET_CHANGED", Chance = 75, Cooldown = 1800, Trigger = function() return UnitName("target") == "Trade Prince Gallywix" end, Emote = "gazes upon the Trade Prince with a mixture of awe, jealousy, and financial calculation. One day, that will be them." },
		{ Name = "Goblin Anxiety", Event = "PLAYER_MONEY", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "rubs their hands together greedily. \"That last deal was profitable, which makes me suspect I'm the sucker in a much larger deal.\"" },
        { Name = "Greedy Gaze", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 600, Trigger = function() return UnitIsPlayer("target") and UnitFactionGroup("target") == "Horde" end, Emote = "eyes the target with a calculating look, wondering how much they could get for their gear." },
        { Name = "Rocket Jump", Event = "JUMP", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "launches into the air with a small explosion, then lands with a satisfied grin." },
        { Name = "Explosive Enthusiasm", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 1200, Trigger = function(_, _, spellID) return spellID == 69070 end, Emote = "grins widely as they successfully detonate a goblin-made explosive." },
		{ Name = "It's All About Profit", Event = "QUEST_COMPLETE", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "snatches the reward and immediately starts counting the coins. Time is money, friend!" },
		{ Name = "Explosive Solution", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() local t=UnitClassification("target"); return t == "worldboss" end, Emote = "eyes the massive creature and starts calculating how much dynamite it would take to solve this problem." },
		{ Name = "Contractual Obligations", Event = "TRADE_SHOW", Chance = 40, Cooldown = 300, Trigger = function() return true end, Emote = "pulls out a long, complicated-looking contract for a seemingly simple trade." },
		{ Name = "Best Deals Anywhere", Event = "GOSSIP_SHOW", Chance = 25, Cooldown = 600, Trigger = function() return UnitIsVendor("target") end, Emote = "tries to haggle with the vendor, convinced they can get a better price." },
		{ Name = "Tinkering Urge", Event = "UNIT_DIED", Chance = 10, Cooldown = 1200, Trigger = function(_, unit) if UnitIsMechanical(unit) then return true end return false end, Emote = "looks at the broken machine and immediately starts trying to salvage some spare parts." },
		{ Name = "Rocket Malfunction", Event = "JUMP", Chance = 5, Cooldown = 1800, Trigger = function() return true end, Emote = "briefly considers using their rocket jump, then decides against it, remembering the last 'incident'." }
	},

	["VoidElf"] = {
		{ Name = "Void Elf Anxiety", Event = "AFK", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "glances around nervously. \"Did I leave a void portal open? No, I'd remember that. Probably. Oh gods, what if I did?\"" },
		{ Name = "Whispers from the Void", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "shudders as the whispers of the Void grow louder in the silence." },
		{ Name = "Tentacle Check", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "takes a moment to make sure their Void-touched hair tentacles are behaving." },
		{ Name = "Embrace the Shadow", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "smiles grimly, the shadows around them seeming to deepen." },
		{ Name = "Existential Dread", Event = "QUEST_DETAIL", Chance = 10, Cooldown = 1200, Trigger = function() return true end, Emote = "reads the quest and ponders its ultimate meaninglessness in the face of an infinite, uncaring Void." },
		{ Name = "Spatial Tear", Event = "MOUNT_START", Chance = 5, Cooldown = 1800, Trigger = function() return true end, Emote = "nearly opens a void rift by accident before mounting up properly." },
		{ Name = "Blood Elf Envy", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 900, Trigger = function() local _,r=UnitRace("target"); return r == "Blood Elf" end, Emote = "looks at their Blood Elf cousin with a complicated mixture of pity and envy." }
	},
	["LightforgedDraenei"] = {
		{ Name = "Lightforged Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "sniffs the air curiously. \"The Light infuses my every atom. So why do I still have a craving for questionable street meat?\"" },
        { Name = "Light's Embrace", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "feels a warm glow of reassurance from the Light, calming their nerves." },
        { Name = "Divine Purpose", Event = "QUEST_COMPLETE", Chance = 25, Cooldown = 900, Trigger = function() return true end, Emote = "accepts the reward with a serene smile, knowing they are fulfilling their divine purpose." },
		{ Name = "For the Light!", Event = "PLAYER_REGEN_DISABLED", Chance = 25, Cooldown = 600, Trigger = function() return true end, Emote = "emits a faint glow as they bellow, \"The Light will prevail!\"" },
		{ Name = "Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 900, Trigger = function() local t=UnitCreatureType("target"); return t == "Demon" end, Emote = "eyes burn with holy fire, their entire life's purpose staring them in the face." },
		{ Name = "Unwavering Faith", Event = "UNIT_DIED", Chance = 15, Cooldown = 1200, Trigger = function() return true end, Emote = "gives a curt nod. The Light's judgment has been delivered." },
		{ Name = "Forge of Light", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 1800, Trigger = function() return UnitName("target") == "Blacksmithing Trainer" end, Emote = "inspects the forge, wondering if it could handle being Lightforged." },
		{ Name = "Tactical Assessment", Event = "QUEST_ACCEPTED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "accepts the mission with the grim determination of a soldier in an eternal war." },
		{ Name = "Holy Aftermath", Event = "PLAYER_DEAD", Cooldown = -1, Trigger = function() return true end, Emote = "explodes in a brilliant flash of light, leaving behind a faint, holy afterimage." }
	},
	["DarkIronDwarf"] = {
		{ Name = "Dark Iron Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "scuffs their boots on the ground, worrying: \"My soul is forged in fire and shadow. So why am I worried about tracking soot on the carpet?\"" },
        { Name = "Molten Resolve", Event = "PLAYER_REGEN_DISABLED", Chance = 25, Cooldown = 600, Trigger = function() return true end, Emote = "feels the heat of their molten core and lets out a fierce battle cry." },
        { Name = "Runic Ingenuity", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 900, Trigger = function() return UnitName("target") == "Runesmith" end, Emote = "examines the runes with a critical eye, eager to learn more about their craft." },
        { Name = "Fire in the Belly", Event = "UNIT_AURA", Chance = 5, Cooldown = 300, Trigger = function(unit) return unit == "player" end, Emote = "feels a surge of warmth and energy as the fire in their belly ignites." },
		{ Name = "Fireblood Itch", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "clenches their fists, feeling the fire in their blood eager to be unleashed." },
		{ Name = "Grudge Recorded", Event = "UNIT_DIED", Chance = 10, Cooldown = 900, Trigger = function(_, unit) if UnitIsPlayer(unit) then return true end return false end, Emote = function() return "makes a mental note. The grudge against " .. UnitName("target") .. "'s associates has been duly noted." end },
		{ Name = "Not Hot Enough", Event = "SWIM_START", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "grumbles as they enter the water. It's not nearly hot enough." },
		{ Name = "For the Forge!", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 1200, Trigger = function() local n = UnitName("target"); return n and (string.find(n,"Golem") or string.find(n,"Construct")) end, Emote = "sizes up the construct, wondering if it was forged in the Black Forge." },
		{ Name = "Mole Machine Mishap", Event = "MOUNT_START", Chance = 10, Cooldown = 1800, Trigger = function() return true end, Emote = "instinctively pats their pockets, checking for their Mole Machine schematics." },
		{ Name = "Respect for the Queen", Event = "ZONE_CHANGED_NEW_AREA", Chance = 15, Cooldown = 3600, Trigger = function() local z=GetZoneText(); return z == "Ironforge" end, Emote = "gives a subtle but respectful nod in the direction of the High Seat, acknowledging Queen-Regent Moira." }
	},
	["KulTiran"] = {
		{ Name = "Kul Tiran Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "adjusts their belt, thinking: \"Am I hearty? Or have I just not seen a proper tailor in years?\"" },
        { Name = "Seafaring Spirit", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "takes a deep breath, smelling the salty sea air and feeling at home." },
        { Name = "Brewmaster's Pride", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 300, Trigger = function() return UnitName("target") == "Brewmaster" end, Emote = "enthusiastically discusses the latest brewing techniques with the Brewmaster." },
        { Name = "Storm's Fury", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 1200, Trigger = function() return true end, Emote = "lets out a hearty laugh and shouts, \"The storm is on our side!\"" },
		{ Name = "Sea Shanty", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "hums a jaunty sea shanty to themself, pleased with the victory." },
		{ Name = "Haymaker Prep", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "cracks their knuckles with a sound like splintering wood." },
		{ Name = "Landlubber", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "The Barrens" or z == "Durotar" end, Emote = "looks around at the dry, dusty landscape and longs for the smell of the sea." },
		{ Name = "Tide's Blessing", Event = "SWIM_START", Chance = 5, Cooldown = 300, Trigger = function() return true end, Emote = "takes to the water with the natural ease of a true child of the sea." },
		{ Name = "Hearty Appetite", Event = "GOSSIP_SHOW", Chance = 25, Cooldown = 600, Trigger = function() return UnitName("target") == "Innkeeper" end, Emote = "asks the innkeeper for their heartiest stew and a pint of something strong." },
		{ Name = "Brush It Off", Event = "UNIT_AURA", Chance = 20, Cooldown = 300, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if auraName then return true; end end return false; end, Emote = "grunts and shrugs, as if to physically shake off the ailment." },
	},
	Mechagnome = {
		{ Name = "Mechagnome Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "'s mechanical eye whirs and clicks, calculating a 73.4% chance of impending social awkwardness." },
        { Name = "Cogwork Precision", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "adjusts their mechanical limbs with a series of precise clicks and whirs." },
        { Name = "Gnome Logic", Event = "UNIT_TARGET", Chance = 10, Cooldown = 1200, Trigger = function() local _,c=UnitClass("target"); return c == "Gnome" end, Emote = "tilts their head, analyzing the target's logic circuits for potential weaknesses." },
		{ Name = "Logic Loop", Event = "QUEST_DETAIL", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "analyzes the quest parameters and determines a 97.4% chance of success." },
		{ Name = "Upgrade Potential", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() if UnitIsMechanical("target") then return true end return false end, Emote = "scans the target, analyzing its parts for potential upgrades." },
		{ Name = "Organic Annoyance", Event = "UNIT_AURA", Chance = 25, Cooldown = 300, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if type(auraName) == "string" and string.find(auraName, "Disease") then return true; end end return false; end, Emote = "emits a series of annoyed beeps and whistles at the inefficiency of organic ailments." },
		{ Name = "Re-Calibrating", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 300, Trigger = function() return true end, Emote = "stands perfectly still for a moment, re-calibrating their combat subroutines." },
		{ Name = "For Mechagon!", Event = "PLAYER_REGEN_DISABLED", Chance = 10, Cooldown = 1200, Trigger = function() return true end, Emote = "emits a metallic battle cry: \"Resistance is illogical!\"" },
		{ Name = "Efficiency Scan", Event = "TRADE_SHOW", Chance = 5, Cooldown = 300, Trigger = function() return true end, Emote = "scans the trade window, calculating the optimal resource exchange to three decimal places." }
	},
	Nightborne = {
		{ Name = "Nightborne Anxiety", Event = "GOSSIP_SHOW", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "clears their throat, thinking: \"After 10,000 years under a dome, small talk feels like advanced sorcery.\"" },
        { Name = "Arcane Focus", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "takes a deep breath, feeling the arcane energies of Suramar flow through them." },
        { Name = "Stealthy Suspicion", Event = "UNIT_TARGET", Chance = 10, Cooldown = 1200, Trigger = function() local _,c=UnitClass("target"); return c == "Rogue" and UnitIsStealthed("target") end, Emote = "raises an eyebrow at the rogue, muttering, \"What are you up to?\"" },
		{ Name = "An Illusion!", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 1200, Trigger = function() local _,c=UnitClass("target"); return c == "ROGUE" and UnitIsStealthed("target") end, Emote = function() return "squints at where " .. UnitName("target") .. " was and mutters, \"An illusion! What are you hiding?\"" end },
		{ Name = "Arcwine Snob", Event = "GOSSIP_SHOW", Chance = 20, Cooldown = 600, Trigger = function() return UnitName("target") == "Innkeeper" end, Emote = "inquires if the establishment has any Arcwine, then looks disappointed when they don't." },
		{ Name = "Ancient Manners", Event = "QUEST_COMPLETE", Chance = 25, Cooldown = 600, Trigger = function() return true end, Emote = "accepts the reward with an elegant, practiced grace that has been honed over 10,000 years." },
		{ Name = "For Suramar!", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "raises their chin, a look of grim pride on their face. \"For the First Arcanist! For Suramar!\"" },
		{ Name = "Mana Dependence", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "absent-mindedly touches their chest, a subconscious check on their connection to the Nightwell." },
		{ Name = "Cantrips", Event = "PLAYER_REGEN_ENABLED", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "creates a small, harmless spark of arcane energy in their palm out of sheer habit." }
	},
	["HighmountainTauren"] = {
		{ Name = "Highmountain Anxiety", Event = "ZONE_CHANGED_INDOORS", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "instinctively ducks their head, wondering if their majestic antlers are a liability in low-doorway situations." },
        { Name = "Mountain's Strength", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "stands tall and proud, feeling the strength of the mountain coursing through them." },
        { Name = "Antler Awareness", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 900, Trigger = function() return true end, Emote = "carefully adjusts their antlers to avoid hitting anything or anyone." },
		{ Name = "Horns of Steel", Event = "ZONE_CHANGED_INDOORS", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "carefully angles their massive horns to fit through the doorway, a practiced and necessary maneuver." },
		{ Name = "Respect the Mountain", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "Highmountain" end, Emote = "takes a deep, reverent breath of the mountain air, feeling truly at home." },
		{ Name = "Bull Rush", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 600, Trigger = function() return true end, Emote = "lowers their head and scrapes a hoof on the ground, preparing for a mighty charge." },
		{ Name = "Skyhorn Eagle", Event = "MOUNT_START", Chance = 10, Cooldown = 1200, Trigger = function() return true end, Emote = "looks to the sky, a part of them wishing they were soaring on their Skyhorn eagle instead." },
		{ Name = "Rivermane Wisdom", Event = "SWIM_START", Chance = 25, Cooldown = 300, Trigger = function() return true end, Emote = "enters the water with a calm confidence, feeling the wisdom of the Rivermane." },
		{ Name = "Huln's Heir", Event = "ACHIEVEMENT_EARNED", Chance = 5, Cooldown = 900, Trigger = function() return true end, Emote = "lets out a proud bellow, feeling the strength of Huln Highmountain in their veins." }
	},
	["MagharOrc"] = {
		{ Name = "Mag'har Anxiety", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() local _,r=UnitRace("target"); return r == "Orc" end, Emote = "squints suspiciously at their green-skinned cousin. \"Is it something in the water?\"" },
        { Name = "For the Horde!", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "lets out a fierce battle cry, ready to defend their uncorrupted brethren." },
        { Name = "Iron Horde Memories", Event = "UNIT_DIED", Chance = 10, Cooldown = 1200, Trigger = function(_, unit) if UnitIsPlayer(unit) and UnitFactionGroup(unit) == "Horde" then return true end return false end, Emote = "feels a pang of sadness for the lost souls of the Iron Horde." },
		{ Name = "Iron Will", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "bares their teeth, their will as unbending as the iron of their homeland." },
		{ Name = "Draenor is Free!", Event = "UNIT_DIED", Chance = 10, Cooldown = 1200, Trigger = function() return true end, Emote = "lets out a victorious cry for their uncorrupted world." },
		{ Name = "Clan Pride", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "nods with satisfaction, bringing honor to their clan." },
		{ Name = "Distrust of Fel", Event = "PLAYER_TARGET_CHANGED", Chance = 25, Cooldown = 900, Trigger = function() local t=UnitCreatureType("target"); return t == "Demon" or UnitClass("target") == "WARLOCK" end, Emote = "lets out a low, guttural growl, their hatred for the fel plain to see." },
		{ Name = "Foreign World", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() return true end, Emote = "looks around at the alien landscape of Azeroth, a stranger in a strange land." },
		{ Name = "Call of the Wild", Event = "GOSSIP_SHOW", Chance = 15, Cooldown = 600, Trigger = function() local t=UnitCreatureType("target"); return t == "Beast" end, Emote = "approaches the beast with a calm respect born from a life of survival." }
	},
	["ZandalariTroll"] = {
		{ Name = "Zandalari Anxiety", Event = "PLAYER_MOVE", Chance = 5, Cooldown = 900, Trigger = function() return not IsFalling() end, Emote = "watches their step carefully, thinking: \"I am descended from kings and gods. I really hope I don't trip over this pebble.\"" },
		{ Name = "For Zandalar!", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 900, Trigger = function() return true end, Emote = "stands tall and proud, shouting \"For the King and for Zandalar!\"" },
		{ Name = "Dinosaur Whisperer", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 600, Trigger = function() local n=UnitName("target"); return n and (string.find(n, "Dinosaur") or string.find(n, "Raptor") or string.find(n, "Devilsaur")) end, Emote = "makes a series of quiet clicks and hisses, a sign of respect to the mighty beast." },
		{ Name = "Loa's Favor", Event = "ACHIEVEMENT_EARNED", Chance = 5, Cooldown = 600, Trigger = function() return true end, Emote = "smiles, knowing their chosen Loa is pleased with their actions." },
		{ Name = "Golden City", Event = "PLAYER_MONEY", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "inspects the new coins, comparing them unfavorably to the pure gold of Dazar'alor." },
		{ Name = "Embrace of the Loa", Event = "PLAYER_DEAD", Cooldown = -1, Trigger = function() return true end, Emote = "feels their spirit being drawn towards the chosen Loa, ready to serve in the next life." },
		{ Name = "Regal Posture", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "stands unnaturally straight and proud, even when doing nothing at all." }
	},
	Vulpera = {
		{ Name = "Vulpera Anxiety", Event = "BAG_UPDATE", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "pats their bags, taking inventory. \"I have everything I need in my caravan. Except for that one thing I just remembered I forgot.\"" },
		{ Name = "Alpaca Care", Event = "MOUNT_START", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "makes sure their saddlebags are secure, humming a little tune for their mount." },
		{ Name = "Scavenger's Eye", Event = "UNIT_DIED", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "immediately starts rummaging through the fallen foe's pockets for anything useful." },
		{ Name = "Desert Bloom", Event = "PLAYER_REGEN_ENABLED", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "shakes the sand from their fur and flashes a cheerful, toothy grin." },
		{ Name = "Make Camp", Event = "PLAYER_UPDATE_RESTING", Chance = 5, Cooldown = 1200, Trigger = function() return IsResting() end, Emote = "finds a cozy spot and instantly makes it feel like a little corner of home." },
		{ Name = "Nose for Trouble", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "twitches their nose, having smelled this trouble coming a mile away." },
		{ Name = "Bag of Tricks", Event = "QUEST_ACCEPTED", Chance = 15, Cooldown = 600, Trigger = function() return true end, Emote = "rummages through their bag, confident they have just the thing for this situation." }
	},
	Dracthyr = {
		{ Name = "Dracthyr Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "tilts their head to the side, thinking: \"I have the power of all five dragonflights, but I can't decide what to have for lunch.\"" },
		{ Name = "Awkward Visage", Event = "PLAYER_UPDATE_RESTING", Cooldown = 900, Trigger = function() return IsResting() end, Emote = "shifts into their Visage form and tries to remember how to stand like a normal, non-lizard person." },
		{ Name = "Temporal Complaint", Event = "CHAT_MSG_LOOT", Chance = 20, Cooldown = 600, Trigger = function(msg) local _,_,i=string.find(msg,"(item:%d+:%d+:%d+:%d+:%d+:%d+:%d+:%d+:%d+)") if i then local _,_,q=GetItemInfo(i) return q==0 or q==1 end return false end, Emote = "looks at the junk item and sighs, \"I can see all possible timelines and this was the best one? Disappointing.\"" },
		{ Name = "Visage Vanity", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 1800, Trigger = function() return UnitIsUnit("target", "player") end, Emote = "subtly checks their reflection in a nearby shiny surface." },
		{ Name = "Creche Memories", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "stares off into the distance, lost in a memory of the Forbidden Reach." },
		{ Name = "Scale Itch", Event = "SWIM_START", Chance = 25, Cooldown = 300, Trigger = function() return true end, Emote = "wiggles around in the water, trying to scratch an itch in a hard-to-reach place under their scales." },
		{ Name = "Draconic Pride", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 1200, Trigger = function() local n=UnitName("target"); return n and string.find(n, "Dragon") end, Emote = "gives the dragon a respectful nod, acknowledging a distant, powerful cousin." }
	}
}


local classQuirks = {
	WARRIOR = {
		{ Name = "Warrior Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "grips their weapon tightly. \"My only plan is to hit it very hard. I hope it doesn't require a second plan.\"" },
		{ Name = "Warrior on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "squints at the glare, thinking \"A warrior with extra glitter. Respectable.\"" },
		{ Name = "Warrior on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "sizes up the pet. \"Just stay back there. Makes my job easier.\"" },
		{ Name = "Warrior on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "scans the shadows. \"Coward. Fight me face to face!\"" },
		{ Name = "Warrior on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "looks determined. \"The healer. Protect them. Or... inconvenience them. Vigorously.\"" },
		{ Name = "Warrior on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "rests a hand on their weapon. \"A warrior who came back wrong. Let's see if they still know how to fight.\"" },
		{ Name = "Warrior on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "braces themself. \"All that flashy lightning. Can they take a punch?\"" },
		{ Name = "Warrior on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "grips their weapon, muttering, \"Stay still, you sparkly little...\"" },
		{ Name = "Warrior on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "lowers their stance. \"Lots of spooky stuff. The answer is, as always, Charge.\"" },
		{ Name = "Warrior on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "smirks. \"They're fast. I'll just have to hit harder.\"" },
		{ Name = "Warrior on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "looks on with anticipation. \"Are they going to turn into a bear? I hope they turn into a bear.\"" },
		{ Name = "Warrior on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "rolls their eyes. \"Lots of jumping. Very annoying.\"" },
		{ Name = "Warrior on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "puffs out their chest. \"A dragon? I've hit bigger.\"" },
		{ Name = "Incapable of Subtlety", Event = "CHAT_MSG_WHISPER_INFORM", Chance = 25, Cooldown = 1800, Trigger = function() return true end, Emote = function(_, recipient) return "yells at " .. string.upper(recipient) .. ", \"I NEED TO TELL YOU SOMETHING IN SECRET!\"" end },
		{ Name = "Object Fixation", Event = "MAIL_SHOW", Cooldown = 900, Trigger = function() return true end, Emote = "eyes the mailbox with intense suspicion, muttering, \"I could probably break that in one hit.\"" },
		{ Name = "Sudden Introspection", Event = "PLAYER_REGEN_ENABLED", Chance = 10, Cooldown = 3600, Trigger = function() return true end, Emote = "ponders deeply. Am I the charging, shouting, smashing type? Or am I the shouting, smashing, charging type?" },
		{ Name = "Volume Issues", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 40, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 6673 end, Emote = "realizes they are shouting indoors and looks slightly embarrassed for a moment." }, -- Battle Shout ID 6673
		{ Name = "Percussive Maintenance", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 600, Trigger = function() return UnitIsPlayer("target") and UnitIsSitting("target") end, Emote = function() return "pats " .. UnitName("target") .. " encouragingly on the back, nearly knocking them over." end },
		{ Name = "Directional Confusion", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 900, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 100 end, Emote = "charges with such ferocity they have to take a moment to get their bearings afterwards." } -- Charge ID 100
	},
	PALADIN = {
        { Name = "Tavern Temperance", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 600, Trigger = function() local n = UnitName("target"); return n and (string.find(n, "Drunkard") or string.find(n, "Tipsy")) end, Emote = "clears their throat loudly, preparing a sermon on the virtues of temperance and the Light's disapproval of public intoxication." },
		{ Name = "Paladin Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "looks at their hands, as if expecting a holy glow. \"What if the Light is just grading on a curve and I'm a solid C+ Paladin?\"" },
		{ Name = "Leeroy Jenkins Moment", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 10, Cooldown = 3600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 31884 and UnitCreatureType("target") == "Dragonkin" end, Emote = "yells, \"Leeeeroy Jenkins!\"" }, -- Avenging Wrath ID 31884
		{ Name = "Paladin on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "nods respectfully. \"A bastion of strength. If only they embraced the Light...\"" },
		{ Name = "Paladin on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "smiles warmly. \"A noble protector of the wilds. A bit scruffy, but their heart is in the right place.\"" },
		{ Name = "Paladin on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "'s hand drifts towards their holy symbol. \"The shadows cannot hide wickedness from the Light.\"" },
        { Name = "Paladin on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "nods respectfully. \"A bastion of strength. If only they embraced the Light...\"" },
        { Name = "Paladin on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "offers a crisp, respectful /salute to a fellow agent of the Light." },
        { Name = "Paladin on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "smiles warmly. \"A noble protector of the wilds. A bit scruffy, but their heart is in the right place.\"" },
        { Name = "Paladin on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "'s hand drifts towards their holy symbol. \"The shadows cannot hide wickedness from the Light.\"" },
        { Name = "Paladin on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "gives a knowing glance. \"A kindred spirit. Though they could do with some proper plate armor.\"" },
        { Name = "Paladin on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "'s expression hardens. \"An abomination. A necessary evil, perhaps, but an abomination nonetheless.\"" },
        { Name = "Paladin on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "ponders for a moment. \"They speak to the elements... I wonder if the Light ever answers them back.\"" },
        { Name = "Paladin on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "looks on with concern. \"Such reckless use of power. The Kirin Tor should keep a closer eye on them.\"" },
        { Name = "Paladin on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "grips their weapon. \"I can feel the fel radiating from them. My hammer hand is twitching.\"" },
        { Name = "Paladin on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "shifts their weight. \"They find balance through inner peace. I find it through a 20-pound hammer. To each their own.\"" },
        { Name = "Paladin on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "nods in understanding. \"They serve nature. I serve the Light. We are both gardeners of a sort.\"" },
        { Name = "Paladin on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "sighs deeply. \"Fighting fire with fire. A dangerous, but perhaps necessary, path.\"" },
        { Name = "Paladin on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "looks on with awe. \"The power of the Aspects... a force for order, much like the Light.\"" },
		{ Name = "Compulsive Sermonizer", Event = "ZONE_CHANGED_NEW_AREA", Cooldown = 1800, Trigger = function() return not InCombatLockdown() end, Emote = "clears their throat loudly and proclaims, \"Fear not, for the Light is with you... even in this den of iniquity!\"" },
		{ Name = "Bubble Brain", Event = "COMBAT_LOG_EVENT_UNFILTERED", Cooldown = 900, Trigger = function(...) local _, e, _, _, _, _, _, d, _, _, _, _, _, t = select(1, ...) return e == "ENVIRONMENTAL_DAMAGE" and t == "Falling" and d == UnitGUID("player") end, Emote = "instinctively reaches for their Divine Shield, even though it was just a small hop." },
		{ Name = "Holier Than Thou", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 900, Trigger = function() local _, c = UnitClass("target") return c == "WARLOCK" or c == "DEATHKNIGHT" or c == "DEMONHUNTER" end, Emote = function() return "squints at " .. UnitName("target") .. " and instinctively places a hand on their hammer." end },
		{ Name = "Divine Steed Driver's Ed", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 5, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 234280 end, Emote = "summons their divine steed and fumbles with the holy reins for a moment before galloping off." }, -- Divine Steed ID 234280
		{ Name = "Judgmental Gaze", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 1200, Trigger = function() return UnitIsEnemy("player", "target") and not UnitIsPlayer("target") end, Emote = "gives their target a look that clearly says 'The Light does not approve of your life choices.'" }
	},
	ROGUE = {
        { Name = "Coin Purse Appraisal", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() local n = UnitName("target"); return n and (string.find(n, "Noble") or string.find(n, "Merchant")) and not UnitIsPlayer("target") end, Emote = "instinctively sizes up the target, their eyes drifting down to the weight and jingle of their coin purse." },
		{ Name = "Rogue Anxiety", Event = "UNIT_AURA", Chance = 15, Cooldown = 900, Trigger = function(unit, s) return unit == "player" and s == "Stealth" end, Emote = "instinctively pulls their collar up. \"Did they see me? I don't think they saw me. They definitely saw me. ABORT.\"" },
		{ Name = "Rogue on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "subtly eyes the numerous buckles on the warrior's armor. So many opportunities." },
		{ Name = "Rogue on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "licks their lips. \"Just a squishy robe full of delicious, interruptible spells.\"" },
        { Name = "Rogue on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "subtly eyes the numerous buckles on the warrior's armor. So many opportunities." },
        { Name = "Rogue on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "palms a small blackjack. \"The shiny ones are always so confident. A quick sap should fix that.\"" },
        { Name = "Rogue on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "moves silently. \"The trick is to get the hunter before the pet gets you.\"" },
        { Name = "Rogue on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "gives a nearly imperceptible nod, acknowledging a fellow professional." },
        { Name = "Rogue on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "'s eyes narrow. \"The one in the dress. Always go for the one in the dress.\"" },
        { Name = "Rogue on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "considers the odds. \"Hard to pickpocket someone who doesn't feel things. But I bet their gear is valuable.\"" },
        { Name = "Rogue on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "'s eye twitches. \"Totems. So many annoying totems.\"" },
        { Name = "Rogue on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "licks their lips. \"Just a squishy robe full of delicious, interruptible spells.\"" },
        { Name = "Rogue on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "smiles thinly. \"They deal in secrets. My line of work exactly.\"" },
        { Name = "Rogue on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "weighs a sap in their hand. \"They're quick, but a well-placed Kidney Shot solves most problems.\"" },
        { Name = "Rogue on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "crouches lower. \"A cat of a different breed. Respect.\"" },
        { Name = "Rogue on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "tests the edge of their blade. \"Blindfolds won't stop a knife in the back.\"" },
        { Name = "Rogue on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "sighs inaudibly. \"Scaly. Probably don't have pockets. Disappointing.\"" },
		{ Name = "Dramatic Exit", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 3600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 8690 end, Emote = "throws down a smoke bomb. When the smoke clears, they are still standing there, fumbling with their hearthstone." }, -- Hearthstone ID 8690
		{ Name = "Vanish Guilt", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 40, Cooldown = 1800, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 1856 end, Emote = "whispers to themself, 'Why am I like this? A simple goodbye would have been fine.'" }, -- Vanish ID 1856
		{ Name = "Shadowy Presence", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 1784 end, Emote = "fades into the shadows, briefly forgetting they were in the middle of a conversation." }, -- Stealth ID 1784
		{ Name = "Lockpicking Obsession", Event = "PLAYER_TARGET_CHANGED", Chance = 25, Cooldown = 900, Trigger = function() return UnitName("target") == "Mailbox" or UnitIsUnit("target", "player") end, Emote = "absent-mindedly checks their pockets for their lockpicks." },
		{ Name = "Over-analysis", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 5, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 13877 end, Emote = "briefly gets mesmerized by all the flashing steel." } -- Blade Flurry ID 13877
	},
HUNTER = {
        -- PET CHECKS ADDED: These will now only fire if you actually have a pet summoned.
        { Name = "Hunter on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "pats their pet reassuringly. \"The big metal wall that stands between me and them. Good.\"" },
        { Name = "Hunter on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "squints at the light. \"The shiny metal wall. Even better.\"" },
        { Name = "Hunter on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "smirks knowingly. \"Nice pet. Mine's better.\"" },
        { Name = "Hunter on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "glances around. \"Better keep my Flare handy.\"" },
        { Name = "Hunter on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "nods. \"The one who patches up my pet after it 'holds aggro'. A valuable asset.\"" },
        { Name = "Hunter on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "wrinkles their nose. \"My pet doesn't like the smell of them.\"" },
        { Name = "Hunter on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "'s pet whines softly. \"They've got an animal friend too. Ghostly, but still counts.\"" },
        { Name = "Hunter on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "readies a tranq shot. \"The one I have to interrupt before they turn my pet into a sheep.\"" },
        { Name = "Hunter on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") and UnitExists("pet") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "'s pet growls. \"Their pets smell... wrong.\"" },
        { Name = "Hunter on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "leans on their bow. \"They move like a crane. I shoot things. It's a simple life.\"" },
        { Name = "Hunter on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "ponders. \"Are they my next pet, or my next friend? The eternal question.\"" },
        { Name = "Hunter on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "sighs. \"All that flapping is going to scare the game away.\"" },
        { Name = "Hunter on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "'s eyes widen. \"A new, exotic beast. Can I tame it? Probably not. But what if...\"" },
		{ Name = "Hunter Anxiety", Event = "PET_BATTLE_OPENING_START", Chance = 15, Cooldown = 900, Trigger = function() return UnitExists("pet") end, Emote = "gives their companion a worried look. \"My pet seems happy. But what if it's just pretending, for my sake?\"" },
		{ Name = "Eagle Eye Distraction", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 10, Cooldown = 1800, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 6197 end, Emote = "uses Eagle Eye and gets completely absorbed watching a particularly interesting squirrel for a few moments." }, -- Eagle Eye ID 6197
		{ Name = "Feign Death Over-Acting", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 5384 end, Emote = "commits to the performance, giving a final, dramatic shudder before becoming completely still." }, -- Feign Death ID 5384
		{ Name = "Trap Amnesia", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 35, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and (spellId == 187698 or spellId == 187650) end, Emote = "takes a few steps, then stops and tries to remember exactly where they put that trap." }, -- Tar Trap 187698, Freezing Trap 187650
		{ Name = "Pet Voice", Event = "CHAT_MSG_PET_BATTLE_COMBAT_LOG", Cooldown = 600, Trigger = function(e) return UnitExists("pet") and string.find(e, "PET_BATTLE_DAMAGE", 1, true) end, Emote = function() return "whispers encouragement to their pet in a high-pitched voice, 'Get 'em, " .. (UnitName("pet") or "buddy") .. "! Get the ankles!'" end },
		{ Name = "Snack Time", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 900, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 136 and UnitExists("pet") end, Emote = "could swear they saw their pet trying to sneak a treat while being healed." } -- Mend Pet ID 136
	},
	MAGE = {
		{ Name = "Mage Anxiety", Event = "PLAYER_MOVE", Chance = 5, Cooldown = 900, Trigger = function() return IsSwimming() end, Emote = "carefully navigates the water. \"I wield the cosmic powers of the arcane, but I'm terrified of getting my robes wet.\"" },
		{ Name = "Mage on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "looks smug. \"They beg for power. I take it. It's a matter of efficiency.\"" },
        { Name = "Mage on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "twirls their fingers. \"A simple problem with a simple solution: Polymorph.\"" },
        { Name = "Mage on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "looks unimpressed. \"The Light is just one school of magic, and they only know a few spells from it.\"" },
        { Name = "Mage on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "conjures a small arcane shield. \"Keep your distance, and they are trivial.\"" },
        { Name = "Mage on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "nervously looks around. \"The primary reason I mastered Blink.\"" },
        { Name = "Mage on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "adjusts their glasses. \"Another practitioner of the magical arts, albeit a less... intellectually rigorous school.\"" },
        { Name = "Mage on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "scribbles a note. \"Their Anti-Magic Shell is a fascinating, if infuriating, application of runic magic.\"" },
        { Name = "Mage on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "looks smug. \"They beg for power. I take it. It's a matter of efficiency.\"" },
        { Name = "Mage on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "sizes them up. \"A duel of intellects! I wonder if they've read the latest theoretical treatise by Archmage Vargoth.\"" },
        { Name = "Mage on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "shakes their head. \"A promising student who took a very dangerous, very lazy shortcut.\"" },
        { Name = "Mage on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "buffs their nails on their robe. \"They use chi. I use the fundamental forces of the cosmos. It's hardly a fair comparison.\"" },
        { Name = "Mage on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "pats them on the head patronizingly. \"Primitive nature magic. Adorable.\"" },
        { Name = "Mage on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "sighs. \"All that chaotic energy. It's like a library set on fire.\"" },
        { Name = "Mage on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "looks intrigued. \"They wield the magic of the Blue Dragonflight. Finally, a worthy intellectual peer.\"" },
		{ Name = "Intellectual Superiority", Event = "QUEST_DETAIL", Chance = 25, Cooldown = 1800, Trigger = function() return true end, Emote = "skims the quest text and scoffs, \"Hardly a challenge for an intellect of my caliber.\"" },
		{ Name = "Food Snob", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 587 end, Emote = "presents their conjured food with a flourish, announcing, \"Behold! A mana bun with a subtle hint of arcane.\"" }, -- Conjure Food ID 587
		{ Name = "Blink Miscalculation", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 33, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 1953 end, Emote = "lands exactly where they intended, give or take a few yards and a wall." }, -- Blink ID 1953
		{ Name = "Arcane Linguist", Event = "QUEST_ACCEPTED", Chance = 15, Cooldown = 1800, Trigger = function() return true end, Emote = "reads the quest text and mutters, 'I could have solved this with a simple incantation. Mortals are so inefficient.'" },
	},
	PRIEST = {
		{ Name = "Priest on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "sighs with determination, looking at the warlock. \"I can fix them.\"" },
        { Name = "Priest on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "prepares a healing spell. \"So much anger. And so many incoming injuries I'll have to mend.\"" },
        { Name = "Priest on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "adjusts their vestments. \"They wield the Light like a hammer. I prefer a more... delicate touch.\"" },
        { Name = "Priest on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "sighs. \"Don't stand in the fire. Don't stand in the fire. Please, for my mana's sake.\"" },
        { Name = "Priest on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "glances knowingly into the shadows. \"I know you're there. The Light sees all. And so does my peripheral vision.\"" },
        { Name = "Priest on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "gives a polite, professional nod. \"I wonder if they're Holy or Shadow. The vibes are... ambiguous.\"" },
        { Name = "Priest on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "adopts a look of pity. \"So much suffering... and so much potential for a very awkward conversion.\"" },
        { Name = "Priest on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "seems thoughtful. \"Their connection to the spirits is fascinating. A different path to faith.\"" },
        { Name = "Priest on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "smiles mischievously. \"Such brilliant minds. It would be a shame if someone... dispelled their intellect.\"" },
        { Name = "Priest on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "sighs with determination. \"I can fix them.\"" },
        { Name = "Priest on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "straightens their back. \"Their inner peace is admirable. Mine comes from a well-timed Power Word: Shield.\"" },
        { Name = "Priest on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "nods. \"They heal the body with nature. I heal the soul with faith. We should compare notes.\"" },
        { Name = "Priest on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "looks concerned. \"Their soul is a raging bonfire of angst and fel. A challenging patient.\"" },
        { Name = "Priest on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "ponders the implications. \"They can mend time itself. That must make triage... interesting.\"" },
		{ Name = "Power Word: Verbose", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 3600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 21562 end, Emote = "anoints their allies, intoning, \"May your health be plentiful and your repair bills low.\"" },
		{ Name = "Compulsive Critic", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 900, Trigger = function() if UnitExists("target") and UnitIsFriend("player", "target") and UnitIsPlayer("target") then return UnitHealth("target") < UnitHealthMax("target") end return false end, Emote = function() return "looks at " .. UnitName("target") .. "'s health bar and sighs audibly." end },
		{ Name = "Healing Over-Aggression", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 1200, Trigger = function(unitID, _, spellId) local h = { [586] = true, [2061] = true, [17] = true } return unitID == "player" and h[spellId] and UnitExists("target") and UnitIsFriend("player", "target") end, Emote = function() return "is healed by " .. UnitName("player") .. "'s aggressive benevolence! Get better! OR ELSE!" end },
		{ Name = "Leap of Faith Regret", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 10, Cooldown = 1200, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 73325 end, Emote = function() return "yanks " .. (UnitName("target") or "their friend") .. " to safety, perhaps a little more forcefully than necessary." end },
		{ Name = "Shadow Word: Sass", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 589 end, Emote = "casts Shadow Word: Pain with a flourish and a whispered insult." },
		{ Name = "Purify Analysis", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 5, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 527 end, Emote = "cleanses the debuff and makes a mental note for the target to avoid standing in bad things." }
	},
	WARLOCK = {
        { Name = "Demonic Appraisal", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() return UnitCreatureType("target") == "Demon" and UnitIsEnemy("player", "target") end, Emote = "eyes the demon with professional curiosity, wondering what dark secrets it holds... and if its will is weak enough to be broken." },
		{ Name = "Warlock Anxiety", Event = "UNIT_PET", Chance = 15, Cooldown = 900, Trigger = function(unit) return unit == "player" end, Emote = "'s eyes dart to the side. \"My demons are whispering about me again. I'm not paranoid, they're just very critical.\"" },
		{ Name = "Warlock on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "smirks as their demon chuckles. \"The self-righteousness is practically blinding. My Voidwalker would love them.\"" },
        { Name = "Warlock on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "raises an eyebrow. \"So much shouting. A simple Curse of Tongues would solve that.\"" },
        { Name = "Warlock on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "smirks as their demon chuckles. \"The self-righteousness is practically blinding. My Voidwalker would love them.\"" },
        { Name = "Warlock on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "looks at their own companion. \"Their pet is a tool. My demon is a partner in mutually beneficial dark bargains.\"" },
        { Name = "Warlock on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "'s own shadow deepens. \"Their shadows are a parlor trick. I command the true darkness.\"" },
        { Name = "Warlock on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "smirks. \"Two sides of the same coin. They just chose the less interesting side.\"" },
        { Name = "Warlock on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "looks bored. \"Death is but one school of forbidden power. I have read the entire library.\"" },
        { Name = "Warlock on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "makes a fist. \"Why ask the elements nicely when you can just bind them to your will?\"" },
        { Name = "Warlock on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "laughs softly. \"They cling to rules and safety. True power lies in breaking them.\"" },
        { Name = "Warlock on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "eyes them suspiciously. \"A rival. I must learn their secrets and make them my own.\"" },
        { Name = "Warlock on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "scoffs. \"Inner peace is a myth. There is only power.\"" },
        { Name = "Warlock on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "examines a soul shard. \"Their devotion to life is... inefficient. Fel provides much faster growth.\"" },
        { Name = "Warlock on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "adjusts their robes. \"Amateurs. They let the fel consume them. I make it work for me.\"" },
        { Name = "Warlock on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "ponders. \"The power of dragons... I wonder what sort of soul shard a dragon would produce.\"" },
		{ Name = "Soulstone Salesman", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 1800, Trigger = function(unitID, _, spellId) if unitID == "player" and spellId == 20707 then return UnitExists("target") and UnitIsFriend("player", "target") end return false end, Emote = function() return "places a Soulstone on " .. UnitName("target") .. " and whispers, \"Standard contract applies. Your soul is forfeit upon use. No refunds.\"" end },
		{ Name = "Eye Twitch", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 6201 end, Emote = "own eye begins to twitch uncontrollably as they summon their scout." },
		{ Name = "Impish Backtalk", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 900, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 688 end, Emote = "summons their Imp and immediately gets into a hushed, but heated, argument with it." },
		{ Name = "Healthstone Haggling", Event = "TRADE_SHOW", Cooldown = 1800, Trigger = function() return true end, Emote = "considers offering a Healthstone, but wonders what they'll get in return." },
		{ Name = "Fear Feedback", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 5, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 118699 end, Emote = "casts Fear and seems to enjoy the resulting panic just a little too much." }
	},
	SHAMAN = {
		{ Name = "Shaman Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "holds out a hand, as if testing the wind. \"The elements are at my command. They mostly ask for vacation days.\"" },
		{ Name = "Shaman on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "growls softly. \"They enslave spirits. A grievous insult to the elements.\"" },
        { Name = "Shaman on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "feels a tremor in the ground. \"The spirit of Earth is strong in them. Stubborn, but strong.\"" },
        { Name = "Shaman on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "closes their eyes and listens. \"They speak to one great spirit. I speak to them all. A matter of perspective.\"" },
        { Name = "Shaman on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "smiles. \"A friend to the spirit of the wild.\"" },
        { Name = "Shaman on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "feels a sudden breeze. \"They move like the wind, but with more stabbing.\"" },
        { Name = "Shaman on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "shields their eyes. \"Their connection to the spirit world is... focused. And very bright.\"" },
        { Name = "Shaman on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "frowns. \"The elements are silent around them. A disturbing lack of balance.\"" },
        { Name = "Shaman on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "gives a respectful nod. \"I wonder which elements they favor. Hopefully not the angry ones.\"" },
        { Name = "Shaman on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "holds out their hand. \"They bend the arcane to their will. I ask the elements for their aid. A crucial difference.\"" },
        { Name = "Shaman on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "growls softly. \"They enslave spirits. A grievous insult to the elements.\"" },
        { Name = "Shaman on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "takes a meditative stance. \"They seek balance within. I seek it without. Two paths up the same mountain.\"" },
        { Name = "Shaman on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "feels a sense of kinship. \"A fellow servant of the natural order.\"" },
        { Name = "Shaman on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "steps back. \"The spirits of fire recoil from their fel energies.\"" },
        { Name = "Shaman on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "rolls their eyes good-naturedly. \"They command the primal elements as a birthright. Show-offs.\"" },
		{ Name = "Reincarnation Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 1800, Trigger = function() return true end, Emote = "pats themself down after the fight, looking relieved. \"Okay... good. Didn't have to use the Ankh this time.\"" },
		{ Name = "Elemental Over-sharer", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 3600, Trigger = function(unitID, _, spellId) return unitID == "player" and (spellId == 8690 or spellId == 3562) end, Emote = "begins to phase out of existence, shouting, \"The elements are calling me home!\"" },
		{ Name = "Chain Heal Ricochet", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 1064 end, Emote = "watches their Chain Heal bounce between allies and feels an immense sense of satisfaction." }
	},
	DRUID = {
        { Name = "Nature's Nurse", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 300, Trigger = function() local n = UnitName("target"); return n and (string.find(n, "Wounded") or string.find(n, "Sickly")) and UnitCreatureType("target") == "Beast" end, Emote = "frowns with concern, feeling an immediate, instinctual urge to soothe the creature's pain and mend its wounds." },
		{ Name = "Druid Anxiety", Event = "UNIT_AURA", Chance = 10, Cooldown = 900, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if type(auraName) == "string" and string.find(auraName, "Form") then return true; end end return false; end, Emote = "touches their face, as if to make sure it's still there. \"I have assumed so many forms I'm starting to forget what my original face looks like.\"" },
		{ Name = "Druid Fishing in Cat Form", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 60, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 7620 and GetShapeshiftFormID() == 2 end, Emote = "paws at the fishing line. This feels... correct." }, -- Fishing ID 7620, Cat Form ID 2
		{ Name = "Druid on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "recoils slightly. \"A blight upon the land. A disruption of the cycle.\"" },
        { Name = "Druid on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "feels a kinship with the earth. \"They are like the mountain: unmoving and strong.\"" },
        { Name = "Druid on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "squints at them. \"Their Light is like the sun, a source of growth. But too much can burn.\"" },
        { Name = "Druid on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "nods respectfully. \"A fellow guardian of the wild. We walk similar paths.\"" },
        { Name = "Druid on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "flicks an ear. \"They have the cunning of the cat, but lack its grace.\"" },
        { Name = "Druid on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "looks up at the moon. \"They call upon the moon's light. A worthy pursuit.\"" },
        { Name = "Druid on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "recoils slightly. \"A blight upon the land. A disruption of the cycle.\"" },
        { Name = "Druid on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "listens to the wind. \"They listen to the whispers of the wind and stone. Respectable.\"" },
        { Name = "Druid on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "rustles like leaves. \"Their ordered magic is a strange thing. Nature is chaotic and beautiful.\"" },
        { Name = "Druid on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "'s fur bristles. \"Their fel magic poisons the very earth.\"" },
        { Name = "Druid on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "stretches like a cat. \"They have the spirit of the tiger and the crane. I have their form.\"" },
        { Name = "Druid on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "gives a subtle animalistic gesture. \"I wonder what their favored form is. I'm partial to the cat myself.\"" },
        { Name = "Druid on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "frowns. \"Their presence is a scar upon the Emerald Dream.\"" },
        { Name = "Druid on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "feels a sense of ancient power. \"They are of the dragons, ancient protectors of this world. An ally.\"" },
		{ Name = "Feral Awkwardness", Event = "ZONE_CHANGED_INDOORS", Chance = 40, Cooldown = 900, Trigger = function() return true end, Emote = "momentarily forgets they are not in cat form and instinctively tries to fit through the doorway sideways." },
		{ Name = "Shapeshifting Sneeze", Event = "CHAT_MSG_EMOTE", Cooldown = 300, Trigger = function(e, p) return string_find(e, "sneeze", 1, true) and p == UnitName("player") end, Emote = "lets out a mighty sneeze and accidentally shifts into a Moonkin form for a brief, startling moment before quickly changing back." },
		{ Name = "Cat Durid is 4 Fite", Event = "CHAT_MSG_WHISPER_INFORM", Chance = 10, Cooldown = 1800, Trigger = function(message) return string_find(message, "cat", 1, true) end, Emote = "puffs out their chest with pride at the mere mention of cats." },
		{ Name = "Resto Regrowth", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 8936 end, Emote = "notices a few extra leaves and twigs sprouting from their target after the heal." },
		{ Name = "Moonkin Dance Party", Event = "PLAYER_REGEN_ENABLED", Chance = 5, Cooldown = 3600, Trigger = function() return GetShapeshiftFormID() == 29 end, Emote = "can't resist doing a little /dance, even after a tough fight." }
	},
	DEATHKNIGHT = {
		{ Name = "Death Knight Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "shivers, despite the lack of cold. \"My unholy powers are immense. I just hope I don't accidentally raise my lunch as a zombie.\"" },
		{ Name = "Death Knight on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "scoffs. \"Their Light burns. An annoying, but fleeting, sensation.\"" },
        { Name = "Death Knight on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "'s grip on their weapon tightens. \"Anger is a powerful weapon. But the cold grip of death is stronger.\"" },
        { Name = "Death Knight on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "scoffs. \"Their Light burns. An annoying, but fleeting, sensation.\"" },
        { Name = "Death Knight on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "appraises the beast. \"Their pet will make a fine addition to my army.\"" },
        { Name = "Death Knight on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "lets out a rattling sigh. \"Their poisons are quaint. I am a walking plague.\"" },
        { Name = "Death Knight on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "smirks coldly. \"Their faith is a shield. My runeblade is a can opener.\"" },
        { Name = "Death Knight on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "slowly nods, a silent understanding passing between two servants of the grave." },
        { Name = "Death Knight on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "looks on dispassionately. \"The elements will fall silent in the end. All things do.\"" },
        { Name = "Death Knight on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "prepares an anti-magic shell. \"Their arcane tricks are amusing. But can they stop the inevitable?\"" },
        { Name = "Death Knight on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "'s eyes glow faintly. \"They consort with demons. I command the dead. We are... business associates.\"" },
        { Name = "Death Knight on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "stands perfectly still. \"Inner peace is a delusion. There is only the cold, silent truth.\"" },
        { Name = "Death Knight on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "looks down on them. \"Their cycle of life and death is flawed. I am the final, perfect state.\"" },
        { Name = "Death Knight on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "seems unimpressed. \"They sacrificed everything. I had everything taken away. We have... different management styles.\"" },
        { Name = "Death Knight on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "'s presence seems to chill the air. \"Time cannot heal the wounds I inflict.\"" },
		{ Name = "Unimpressed by Riches", Event = "PLAYER_MONEY", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "glances at the newly acquired coins and sighs, \"This will do little to fill the eternal emptiness in my soul.\"" },
		{ Name = "Ghoulish Fashion Critic", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "stares at their new equipment and mutters, \"Does this come in a darker shade of black?\"" },
		{ Name = "The Shakes", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 900, Trigger = function() return true end, Emote = "clenches and unclenches their fists, trying to quell the eternal hunger." },
		{ Name = "Death Grip Overreach", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 600, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 49576 end, Emote = function() return "yanks " .. (UnitName("target") or "their foe") .. " a little too close for comfort." end },
		{ Name = "Icy Demeanor", Event = "CHAT_MSG_EMOTE", Cooldown = 1800, Trigger = function(e, p) return (string_find(e, "laugh", 1, true) or string_find(e, "smile", 1, true)) and p == UnitName("player") end, Emote = "attempts a smile, but it comes out as more of a grimace. The effort is noted." }
	},
	MONK = {
		{ Name = "Monk Anxiety", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "takes a slow, deep breath. \"Inner peace... inner peace... who am I kidding, I want to punch a dragon.\"" },
		{ Name = "Monk on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "centers themself. \"Their chi is a raging bonfire. Unfocused, but powerful.\"" },
        { Name = "Monk on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "centers themself. \"Their chi is a raging bonfire. Unfocused, but powerful.\"" },
        { Name = "Monk on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "performs a slow, deliberate movement. \"They have a strong center, but they are too rigid. They must learn to flow like water.\"" },
        { Name = "Monk on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "nods. \"They have achieved harmony with their companion. A worthy goal.\"" },
        { Name = "Monk on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "takes a sip from their flask. \"Their movements are swift, but their spirit is clouded by mischief.\"" },
        { Name = "Monk on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "bows. \"They seek to heal the body and mind. A noble path.\"" },
        { Name = "Monk on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "shudders slightly. \"Their chi is... silent. A void where there should be life. It is unsettling.\"" },
        { Name = "Monk on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "smiles. \"They find balance with the world. I find it within myself. We are not so different.\"" },
        { Name = "Monk on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "closes their eyes for a moment. \"Their mind is a torrent of energy. They should meditate more.\"" },
        { Name = "Monk on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "looks sad. \"Their spirit is in turmoil, chained to another's will. A path to suffering.\"" },
        { Name = "Monk on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "/bows deeply, acknowledging a fellow student of the path." },
        { Name = "Monk on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "practices a quick jab. \"They can become the tiger. I can punch like the tiger. A subtle, but important, distinction.\"" },
        { Name = "Monk on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "offers a drink. \"So much inner turmoil. They should try our Celestial Brew.\"" },
        { Name = "Monk on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "thinks about tea. \"They embody the wisdom of the Celestials. I wonder if they have any good tea recipes.\"" },
		{ Name = "Compulsive Roll", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 15, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 101545 end, Emote = "uses Roll and, finding they have nowhere in particular to be, looks slightly embarrassed." },
		{ Name = "Inner Peace... Interrupted", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "takes a deep, centering breath before remembering violence is also an answer." },
		{ Name = "Sudden Stillness", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 900, Trigger = function() return not InCombatLockdown() end, Emote = "stops for a moment, taking a deep breath to center themself before continuing on their journey." },
		{ Name = "Keg Smash Regret", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 300, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 121253 end, Emote = "smashes a keg of brew and looks wistfully at the wasted ale." },
		{ Name = "Zen Moment", Event = "ACHIEVEMENT_EARNED", Cooldown = 3600, Trigger = function() return true end, Emote = "achieves a moment of perfect clarity and inner peace... before realizing there's more loot to get." }
	},
	DEMONHUNTER = {
		{ Name = "Demon Hunter Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "'s stomach audibly rumbles. \"I've sacrificed everything. What have you given? And more importantly, do you have any snacks?\"" },
		{ Name = "Demon Hunter on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "growls. \"They bargain with demons. A fatal mistake.\"" },
        { Name = "Demon Hunter on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "smirks. \"All that strength, but they lack the vision to see the true enemy.\"" },
        { Name = "Demon Hunter on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "adjusts their blindfold. \"They fear the darkness. I wear it as a cloak.\"" },
        { Name = "Demon Hunter on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "scoffs. \"They hunt beasts. I hunt demons. We are not the same.\"" },
        { Name = "Demon Hunter on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "clenches a fist. \"Their shadows are for hiding. Mine are for killing.\"" },
        { Name = "Demon Hunter on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "looks grim. \"Their faith is a comfort. I have sacrificed comfort for power.\"" },
        { Name = "Demon Hunter on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "flexes their wings. \"We both walk a dark path. At least mine has more jumping.\"" },
        { Name = "Demon Hunter on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "touches their chest. \"They talk to spirits. I talk to the demon inside me. It's mostly screaming.\"" },
        { Name = "Demon Hunter on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "'s tattoos glow faintly. \"They study power. I consumed it.\"" },
        { Name = "Demon Hunter on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "growls. \"They bargain with demons. A fatal mistake.\"" },
        { Name = "Demon Hunter on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "looks confused. \"Inner peace? What's that?\"" },
        { Name = "Demon Hunter on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "looks determined. \"They protect the Dream. I hunt the Nightmare.\"" },
        { Name = "Demon Hunter on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "gives a solemn nod. \"I see the sacrifice in their eyes. They know what it costs.\"" },
        { Name = "Demon Hunter on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "prepares for battle. \"They were created to fight. I was re-made to.\"" },
		{ Name = "I've Sacrificed Everything...", Event = "QUEST_TURNED_IN", Chance = 5, Cooldown = 1800, Trigger = function() return true end, Emote = "takes the reward and scoffs, \"A few gold and some useless boots? Is this what I gave up my eyes for?!\"" },
		{ Name = "Involuntary Fel Rush", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 600, Trigger = function() return true end, Emote = "tenses up for the fight, their body instinctively wanting to Fel Rush straight through the enemy and into the wall behind them." },
		{ Name = "Spectral Sight Sensitivity", Event = "UNIT_SPELLCAST_SUCCEEDED", Cooldown = 900, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 188501 end, Emote = "winces as the world erupts into a chaotic mess of souls and magic." },
		{ Name = "Warglaive Polishing", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 1200, Trigger = function() return true end, Emote = "absent-mindedly begins polishing their warglaives on their trousers after a fight." },
		{ Name = "Inner Demon Arguments", Event = "AFK", Cooldown = -1, Trigger = function() return true end, Emote = "appears to be having a heated, one-sided argument with themself." }
	},
	EVOKER = {
        { Name = "Evoker on Warrior", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARRIOR" end return false end, Emote = "observes them intently. \"A mortal expression of the Black Dragonflight's strength and resilience. Fascinating.\"" },
        { Name = "Evoker on Paladin", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PALADIN" end return false end, Emote = "tilts their head. \"They channel an external power, much like a dragon channels the titans' magic. Intriguing.\"" },
        { Name = "Evoker on Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="HUNTER" end return false end, Emote = "seems to approve. \"Their bond with their companion mirrors that of a dragon and their rider.\"" },
        { Name = "Evoker on Rogue", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="ROGUE" end return false end, Emote = "looks amused. \"They weave through the battlefield like a whelp through an obstacle course.\"" },
        { Name = "Evoker on Priest", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="PRIEST" end return false end, Emote = "nods. \"Their mending abilities are similar to the magic of the Green Dragonflight, but on a smaller scale.\"" },
        { Name = "Evoker on Death Knight", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEATHKNIGHT" end return false end, Emote = "looks on with distaste. \"Their existence is an affront to the Red Dragonflight's charge over life.\"" },
        { Name = "Evoker on Shaman", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="SHAMAN" end return false end, Emote = "seems proud. \"They borrow the power of the elements. We were born of them.\"" },
        { Name = "Evoker on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "studies them. \"A mortal wielding the power of the Blue Dragonflight. How curious.\"" },
        { Name = "Evoker on Warlock", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="WARLOCK" end return false end, Emote = "huffs a small puff of smoke. \"Their magic is chaotic and destructive, a pale imitation of the Black Dragonflight's power.\"" },
        { Name = "Evoker on Monk", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MONK" end return false end, Emote = "seems intrigued. \"They focus their own energy. An interesting departure from drawing on external sources.\"" },
        { Name = "Evoker on Druid", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DRUID" end return false end, Emote = "feels a connection. \"They are tied to the Emerald Dream, a place we know well.\"" },
        { Name = "Evoker on Demon Hunter", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="DEMONHUNTER" end return false end, Emote = "narrows their eyes. \"They took power from our ancient enemies. A bold, if reckless, choice.\"" },
        { Name = "Evoker on Evoker", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 180, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="EVOKER" end return false end, Emote = "gives a draconic greeting. \"Another Dracthyr. It is good to not be alone in this strange, new time.\"" },
		{ Name = "Evoker Anxiety", Event = "PLAYER_REGEN_ENABLED", Chance = 15, Cooldown = 900, Trigger = function() return true end, Emote = "rubs their temples. \"I can rewind time, which mostly means I have more opportunities to regret my decisions.\"" },
		{ Name = "Evoker on Mage", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 300, Trigger = function() if UnitExists("target") then local _,c=UnitClass("target"); return c=="MAGE" end return false end, Emote = "studies them. \"A mortal wielding the power of the Blue Dragonflight. How curious.\"" },
		{ Name = "Awkward Visage", Event = "PLAYER_UPDATE_RESTING", Cooldown = 900, Trigger = function() return IsResting() end, Emote = "shifts into their Visage form and tries to remember how to stand like a normal, non-lizard person." },
		{ Name = "Temporal Complaint", Event = "CHAT_MSG_LOOT", Chance = 20, Cooldown = 600, Trigger = function(msg) local _, _, i = string_find(msg, "(item:%d+:%d+:%d+:%d+:%d+:%d+:%d+:%d+:%d+)") if i then local _, _, q = GetItemInfo(i) return q == 0 or q == 1 end return false end, Emote = "looks at the junk item and sighs, \"I can see all possible timelines and this was the best one? Disappointing.\"" },
		{ Name = "Visage Vanity", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 1800, Trigger = function() return UnitIsUnit("target", "player") end, Emote = "subtly checks their reflection in a nearby shiny surface." },
		{ Name = "Deep Breath Apology", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 40, Cooldown = 900, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 357210 end, Emote = "lands and quietly apologizes to any critters that may have been singed." },
		{ Name = "Bronze Dragon Pedantry", Event = "QUEST_COMPLETE", Chance = 20, Cooldown = 1200, Trigger = function() return true end, Emote = "mutters that, technically, this event already happened in a different timeline, but they'll take the reward anyway." }
	}
}

local globalQuirks = {

    
	{ Name = "Sheepish Thoughts", Event = "UNIT_AURA", Chance = 20, Cooldown = 60, Trigger = function(unit) if unit ~= "player" then return false end return C_UnitAuras.GetAuraDataByName("player", "Polymorph") ~= nil end, Emote = "feels an overwhelming urge to nibble on some grass. Baa." },
	{ Name = "Overkill", Event = "COMBAT_LOG_EVENT_UNFILTERED", Chance = 1, Cooldown = 180, Trigger = function() local _, s, _, _, src, _, _, _, _, _, _, _, o = CombatLogGetCurrentEventInfo(); return s == "SWING_DAMAGE" and src == UnitName("player") and o and o > 500 end, Emote = "looks at the obliterated corpse and mutters, \"I think I got 'em.\"" },
	{ Name = "That Tickles", Event = "COMBAT_LOG_EVENT_UNFILTERED", Chance = 5, Cooldown = 60, Trigger = function() local _, s, _, _, _, _, _, dst, _, _, _, a = CombatLogGetCurrentEventInfo(); return s == "SWING_DAMAGE" and dst == UnitGUID("player") and a and a < 100 end, Emote = "barely registers the hit and looks at their attacker with confusion." },
	{ Name = "Wrong Target", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 120, Trigger = function() return UnitExists("target") and UnitIsTapDenied("target") and InCombatLockdown() end, Emote = "realizes the target is already claimed by someone else and looks around for a new victim." },
	{ Name = "Inspection Judgement", Event = "INSPECT_READY", Chance = 60, Cooldown = 180, Trigger = function(guid) local _,_,_,_,_,n = GetPlayerInfoByGUID(guid); return n ~= nil end, Emote = function(guid) local _,_,_,_,_,n = GetPlayerInfoByGUID(guid); return "subtly judges " .. (n or "them") .. "'s gear choices, giving them a mental score of 7/10." end },	{ Name = "Stunned Contemplation", Event = "UNIT_AURA", Chance = 20, Cooldown = 60, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if type(auraName) == "string" and (auraName == "Sap" or auraName == "Gouge") then return true; end end return false; end, Emote = "has a moment for some quiet reflection while being unable to move. It's actually kind of peaceful." },
	{ Name = "Quest Log Overwhelm", Event = "QUEST_LOG_UPDATE", Chance = 10, Cooldown = 300, Trigger = function() return C_QuestLog.GetNumQuestLogEntries() > 20 end, Emote = "glances at their quest log, feels a wave of anxiety, and decides to just go fishing instead." },
    { Name = "Existential Stat Crisis", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 20, Cooldown = 600, Trigger = function() return CharacterFrame and CharacterFrame:IsVisible() end, Emote = "stares at their character sheet, wondering if their worth as a person can truly be measured in Agility and Stamina." },
    { Name = "Talent Tree Tinkering", Event = "PLAYER_TALENT_UPDATE", Chance = 20, Cooldown = 60, Trigger = function() return true end, Emote = "admires their new talent choices, confident this is the optimal build... for the next five minutes." },
    { Name = "Achievement Get!", Event = "ACHIEVEMENT_EARNED", Chance = 20, Cooldown = 10, Trigger = function() return true end, Emote = "hears a satisfying sound and feels a rush of validation for completing a moderately difficult task!" },
    { Name = "Suddenly Rich", Event = "CHAT_MSG_LOOT", Chance = 10, Cooldown = 900, Trigger = function(msg) return string.find(msg, "receives loot: |cff0070dd|Hitem") end, Emote = "sees the flash of purple text and immediately starts planning how to spend their newfound fortune." }, -- Epic Item color
    { Name = "Mailbox Full", Event = "MAIL_INBOX_UPDATE", Chance = 20, Cooldown = 1800, Trigger = function() local num = GetInboxNumItems(); return num and num > 40 end, Emote = "sees the mail icon and sighs. It's probably just more junk from that auction house scheme." },
    { Name = "Fishing Frustration", Event = "CHAT_MSG_LOOT", Chance = 40, Cooldown = 120, Trigger = function(msg) return string.find(msg, "Your fish got away!") end, Emote = "glares at the water, convinced the fish are mocking them personally." },
    { Name = "Crafting Calamity", Event = "CHAT_MSG_SKILL", Chance = 20, Cooldown = 60, Trigger = function(msg) return string.find(msg, "creation failed") end, Emote = "throws the failed craft on the ground and stomps on it for good measure." },
    { Name = "Culinary Critic", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 5, Cooldown = 180, Trigger = function(u, _, id) return u == "player" and id == 2550 end, Emote = "tastes their creation and adds a pinch of something, declaring it 'perfect' with the authority of a master chef." }, -- Cooking Spell ID
    { Name = "Archaeology Back Pain", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 25, Cooldown = 120, Trigger = function(u, _, id) return u == "player" and id == 74938 end, Emote = "surveys the ground and groans, feeling a twinge in their back just thinking about it." }, -- Survey Spell ID
    { Name = "Spooky Forest Jitters", Event = "ZONE_CHANGED_NEW_AREA", Chance = 60, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Duskwood" or z == "Ghostlands" end, Emote = "pulls their cloak tighter and starts jumping at every snapped twig." },
    { Name = "City Slicker", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Stormwind City" or z == "Orgrimmar" or z == "Boralus" or z == "Dazar'alor" end, Emote = "takes a deep breath. It smells like progress, pollution, and questionable street food." },
    { Name = "Comfy Chair", Event = "PLAYER_TARGET_CHANGED", Chance = 15, Cooldown = 300, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Chair") end, Emote = "eyes the chair, considering abandoning all their worldly quests for a quick nap." },
	{ Name = "Mountaineer's Pride", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Dun Morogh" or z == "Loch Modan" end, Emote = "stands tall, feeling a deep connection to the mountains and their dwarven heritage." },
	{ Name = "Desert Wanderer", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Tanaris" or z == "Silithus" end, Emote = "squints at the horizon. \"It's so hot, I can feel my brain melting.\"" },
	{ Name = "Underwater Explorer", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Vashj'ir" or z == "Nazjatar" end, Emote = "takes a deep breath and prepares for the underwater adventure of a lifetime." },
	{ Name = "High Altitude Anxiety", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Storm Peaks" or z == "Twilight Highlands" end, Emote = "feels a bit lightheaded from the altitude and clutches their chest dramatically." },
	{ Name = "The Long Fall", Event = "COMBAT_LOG_EVENT_UNFILTERED", Chance = 20, Cooldown = 60, Trigger = function(...) local _, eventType, _, _, _, _, _, destGUID, _, _, _, _, _, environmentalType = select(1, ...); if eventType == "ENVIRONMENTAL_DAMAGE" and destGUID == UnitGUID("player") and environmentalType == "Falling" then return true; end return false; end, Emote = "lands with a thud and takes a moment to ensure all their bones are still on the inside." },
	{ Name = "Fishing Hole Discovery", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Darkmoon Island" or z == "The Hinterlands" end, Emote = "spots a fishing hole and can't resist the urge to cast their line." },
	{ Name = "Gnomish Curiosity", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "Gnomeregan" or z == "Ironforge" end, Emote = "looks around with wide eyes, fascinated by the gnomish technology and engineering marvels." },
	{ Name = "Deeprun Tram Ride", Event = "ZONE_CHANGED", Chance = 20, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "The Deeprun Tram" end, Emote = "enjoys the surprisingly scenic underwater journey." },
    { Name = "What's That Smell?", Event = "ZONE_CHANGED_NEW_AREA", Chance = 10, Cooldown = 1800, Trigger = function() local z = GetZoneText(); return z == "The Undercity" or z == "Western Plaguelands" end, Emote = "wrinkles their nose. The air here smells of death, decay, and... is that mint?" },
    { Name = "Auction House Regret", Event = "AUCTION_HOUSE_CLOSED", Chance = 10, Cooldown = 300, Trigger = function() return true end, Emote = "walks away from the auctioneer, already regretting all of their recent financial decisions." },
    { Name = "Innkeeper's Ear", Event = "GOSSIP_SHOW", Chance = 5, Cooldown = 600, Trigger = function() return UnitName("target") == "Innkeeper" end, Emote = "leans on the counter, suddenly feeling the urge to tell the innkeeper all of their problems." },
    { Name = "Trainer's Pet", Event = "GOSSIP_SHOW", Chance = 40, Cooldown = 600, Trigger = function() local n = UnitName("target"); return n and string.find(n, "Trainer") end, Emote = "listens intently, trying to look like the star pupil." },
	{ Name = "Awkward Silence", Event = "GROUP_ROSTER_UPDATE", Chance = 25, Cooldown = 120, Trigger = function() return GetNumGroupMembers() > 0 and not InCombatLockdown() end, Emote = "stands with their new group, waiting for someone else to say the first word." },
	{ Name = "Trade Chat Troll", Event = "CHAT_MSG_CHANNEL", Chance = 20, Cooldown = 60, Trigger = function(msg) return string.find(msg, "Trade") end, Emote = "rolls their eyes at the latest trade chat drama and decides to just ignore it." },
	{ Name = "Questgiver's Dilemma", Event = "QUEST_ACCEPTED", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "accepts the quest with a sigh, already dreading the long list of tasks ahead." },
	{ Name = "NPC Compliment", Event = "GOSSIP_SHOW", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "gives a compliment to the NPC, hoping it will lead to better rewards." },
	{ Name = "Vendor's Delight", Event = "MERCHANT_SHOW", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "browses the vendor's wares with a mix of excitement and skepticism." },
	{ Name = "Quest Turn-In Satisfaction", Event = "QUEST_TURNED_IN", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "feels a sense of accomplishment after turning in a quest." },
	{ Name = "Dungeon Finder Anxiety", Event = "LFG_LIST_APPLICATION_STATUS_UPDATED", Chance = 10, Cooldown = 600, Trigger = function() return true end, Emote = "stares at the LFG window, anxiously waiting for their application to be accepted." },
    { Name = "Hallow's End Treat", Event = "CHAT_MSG_LOOT", Chance = 20, Cooldown = 30, Trigger = function(msg) return string.find(msg, "Tricky Treat") end, Emote = "gleefully inspects their candy, experiencing a brief moment of pure, simple joy." },
    { Name = "Winter Veil Spirit", Event = "PLAYER_TARGET_CHANGED", Chance = 40, Cooldown = 900, Trigger = function() local n = UnitName("target"); return n == "Greatfather Winter" or n == "Great-father Winter" end, Emote = "fidgets excitedly, trying to remember what they wanted for Winter Veil this year." },
    { Name = "Noblegarden Nuisance", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 60, Trigger = function(u,_,id) return u=="player" and id == 61765 end, Emote = "places a Noblegarden Egg and then hides, waiting for some unsuspecting person to find it." }, -- Place Egg ID
	{ Name = "Love is in the Air", Event = "UNIT_AURA", Chance = 70, Cooldown = 1800, Trigger = function(unit, auraInfo) if unit == "player" then local auraName; if type(auraInfo) == "table" then auraName = auraInfo.name; else auraName = auraInfo; end if type(auraName) == "string" and (string.find(auraName, "Perfume") or string.find(auraName, "Cologne")) then return true; end end return false; end, Emote = "is suddenly overcome with affection and blows a kiss to the nearest squirrel." },
    { Name = "Midsummer Fire", Event = "PLAYER_TARGET_CHANGED", Chance = 60, Cooldown = 300, Trigger = function() local n=UnitName("target"); return n and string.find(n, "Bonfire") end, Emote = "feels a primal urge to dance around the fire like a maniac. For the festival, of course." },
    { Name = "Brewfest Goggles", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 20, Cooldown = 600, Trigger = function(slot) return slot == "HeadSlot" and IsEventActive("Brewfest") end, Emote = "puts on their beer goggles and the world immediately looks a bit more wobbly and friendly." },
    { Name = "Hogger PTSD", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 3600, Trigger = function() return UnitName("target") == "Hogger" end, Emote = "shudders, a memory of past terror surfacing. The Scourge of Elwynn Forest stands before them." },
    { Name = "Murloc Menace", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 120, Trigger = function() return UnitCreatureType("target") == "Murloc" end, Emote = "hears a faint, gurgling 'mrglrglmrglm' in the distance and instinctively reaches for their weapon." },
    { Name = "Khadgar's Errands", Event = "PLAYER_TARGET_CHANGED", Chance = 80, Cooldown = 1800, Trigger = function() return UnitName("target") == "Archmage Khadgar" end, Emote = "braces themself, fully expecting to be asked to collect 800 of something completely mundane from a place of cosmic horror." },
	{ Name = "Bag Space Anxiety", Event = "CHAT_MSG_LOOT", Chance = 10, Cooldown = 300, Trigger = function(msg) return string.find(msg, "inventory is full") end, Emote = "pats their bags with a growing sense of dread." },
	{ Name = "Food Buff Contemplation", Event = "UNIT_AURA", Chance = 20, Cooldown = 600, Trigger = function(unitID) return unitID == "player" and IsEating() end, Emote = "chews thoughtfully, hoping the food buff is really worth the chewing time." },
	{ Name = "Map Check... Again", Event = "QUEST_ACCEPTED", Chance = 5, Cooldown = 120, Trigger = function() return true end, Emote = "accepts the quest and immediately has the urge to check their map. Again." },
	{ Name = "Recipe Hoarder", Event = "CHAT_MSG_SKILL", Chance = 20, Cooldown = 10, Trigger = function(msg) return string.find(msg, "You have learned") end, Emote = "carefully files away the new recipe they will tell themself they're going to use 'soon'." },
	{ Name = "Transmog Anxiety", Event = "PLAYER_EQUIPMENT_CHANGED", Chance = 15, Cooldown = 300, Trigger = function() return true end, Emote = "subtly adjusts their shoulderpads, suddenly wondering if their gear matches. They definitely notice. Everyone notices." },
	{ Name = "Hearthstone Logic", Event = "UNIT_SPELLCAST_SUCCEEDED", Chance = 20, Cooldown = 1800, Trigger = function(unitID, _, spellId) return unitID == "player" and spellId == 8690 end, Emote = "sighs contentedly. There's no place like home, mostly because it has a bank and an auction house." },
	{ Name = "Flight Master Approval", Event = "TAXIMAP_OPENED", Chance = 20, Cooldown = 900, Trigger = function() return true end, Emote = "wonders what their approval rating is with the local flight master." },
	{ Name = "Mail Anxiety", Event = "MAIL_SEND_SUCCESS", Chance = 20, Cooldown = 30, Trigger = function() return true end, Emote = "taps their foot impatiently. Now to wait anxiously for the next hour." },
	{ Name = "Title Envy", Event = "PLAYER_TARGET_CHANGED", Chance = 5, Cooldown = 600, Trigger = function() return UnitIsPlayer("target") and UnitPVPName("target") end, Emote = "eyes the target's title and feels a pang of envy. 'The Patient' just doesn't have the same ring to it." },
	{ Name = "Accidental Pull", Event = "PLAYER_REGEN_DISABLED", Chance = 15, Cooldown = 120, Trigger = function() return GetNumGroupMembers() == 0 end, Emote = "stumbles directly into a new fight and sighs. \"I really need to stop doing that.\"" },
	{ Name = "Post-Combat Swagger", Event = "PLAYER_REGEN_ENABLED", Chance = 20, Cooldown = 180, Trigger = function() return true end, Emote = "dusts themself off, pretending it was easy." },
	{ Name = "Elite Engagement", Event = "PLAYER_REGEN_DISABLED", Chance = 80, Cooldown = 300, Trigger = function() return UnitClassification("target") == "elite" or UnitClassification("target") == "rareelite" end, Emote = "gulps. \"This one looks important. And painful.\"" },
	{ Name = "Healed", Event = "COMBAT_LOG_EVENT_UNFILTERED", Chance = 20, Cooldown = 60, Trigger = function(...) local _, e, _, _, _, _, _, _, _, _, _, _, spellName, _, _, _, _, _, crit = select(1, ...); return (e == "SPELL_HEAL" or e == "SPELL_PERIODIC_HEAL") and spellName ~= nil end, Emote = "basks in the healing glow and says, \"Ah, much better. Thanks!\"" },
	{ Name = "Boss Pull", Event = "PLAYER_REGEN_DISABLED", Chance = 20, Cooldown = 1800, Trigger = function() return UnitClassification("target") == "worldboss" or UnitClassification("target") == "boss" end, Emote = "takes a deep breath. \"Alright, let's do this. What's the worst that could happen?\"" },
	{ Name = "Skygazing", Event = "PLAYER_UPDATE_RESTING", Chance = 10, Cooldown = 900, Trigger = function() return not IsResting() end, Emote = "looks up at the sky and ponders the great, vast nothingness. And also, clouds." },
	{ Name = "Treasure!", Event = "CHAT_MSG_LOOT", Chance = 20, Cooldown = 10, Trigger = function(msg) local _, _, itemLink = string.find(msg, "(|Hitem[%-:%d]+|h)"); if itemLink then local _, _, quality = GetItemInfo(itemLink); if quality and quality >= 3 then return true; end end return false; end, Emote = "gasps, \"Ooh, shiny!\"" },	{ Name = "Cave Entrance", Event = "ZONE_CHANGED_INDOORS", Chance = 60, Cooldown = 180, Trigger = function() return true end, Emote = "peers into the darkness. \"Well, this looks dark and foreboding. Let's go in!\"" },
	{ Name = "New Area", Event = "ZONE_CHANGED_NEW_AREA", Chance = 20, Cooldown = 600, Trigger = function() return true end, Emote = "looks around, taking in the new sights." },
	{ Name = "Rare Mob Sighting", Event = "UNIT_TARGET", Chance = 20, Cooldown = 300, Trigger = function() return UnitClassification("target") == "rare" or UnitClassification("target") == "rareelite" end, Emote = "'s eyes light up. A rare one! It probably drops something mediocre!" },
	{ Name = "Tavern Entry", Event = "MINIMAP_UPDATE_TRACKING", Chance = 90, Cooldown = 1200, Trigger = function() return IsResting() end, Emote = "takes a deep breath, smelling the ale and hearth smoke. \"Ah, a fine establishment!\"" },
	{ Name = "Desert Thoughts", Event = "ZONE_CHANGED_NEW_AREA", Chance = 70, Cooldown = 1800, Trigger = function() local z=GetZoneText(); return z == "Tanaris" or z == "Uldum" or z == "Voldun" end, Emote = "shakes sand out of their boots. \"It's coarse and rough and it gets everywhere.\"" },
	{ Name = "Smell the Flowers", Event = "PLAYER_REGEN_ENABLED", Chance = 5, Cooldown = 300, Trigger = function() return true end, Emote = "stops to smell the flowers. Or, the vaguely flower-like object." },
	{ Name = "Guard Watching", Event = "PLAYER_TARGET_CHANGED", Chance = 20, Cooldown = 300, Trigger = function() return UnitReaction("target", "player") == 4 and UnitIsCivilian("target") end, Emote = "watches the guard, wondering if they get bored just standing there all day." },
	{ Name = "Party Invite", Event = "PARTY_INVITE_REQUEST", Chance = 20, Cooldown = 60, Trigger = function() return true end, Emote = "considers the group invitation. \"Hope they're not weird.\"" },
	{ Name = "High Level Player", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 120, Trigger = function() return UnitIsPlayer("target") and UnitLevel("target") > UnitLevel("player") + 10 end, Emote = "looks on with admiration. \"Wow, look at their gear. They've definitely seen some stuff.\"" },
	{ Name = "Low Level Player", Event = "PLAYER_TARGET_CHANGED", Chance = 10, Cooldown = 120, Trigger = function() return UnitIsPlayer("target") and UnitLevel("target") < UnitLevel("player") - 10 end, Emote = "offers a faint, encouraging smile to the new adventurer, so full of hope and green gear." },
	{ Name = "Duel Request", Event = "DUEL_REQUESTED", Chance = 20, Cooldown = 300, Trigger = function() return true end, Emote = "cracks their knuckles. \"A challenge! Let's do this.\"" },
}

local function SafeTrigger(triggerFunc, ...)
    if not triggerFunc then return false end
    -- pcall prevents one bad quirk from crashing the whole addon
    local success, result = pcall(triggerFunc, ...)
    if not success then
        -- Optional: print("|cffFF0000Quirk Error:|r " .. (result or "Unknown error"))
        return false
    end
    return result
end

-- HELPER: Safe execution of dynamic emotes (functions)
local function GetEmoteText(emoteEntry, ...)
    if type(emoteEntry) == "function" then
        local success, result = pcall(emoteEntry, ...)
        if success then return result end
        return nil
    end
    return emoteEntry
end

-- FIX: specific events that shouldn't be registered normally
local virtualEvents = {
    ["JUMP"] = true,             -- Handled by hooksecurefunc below
    ["AFK"] = "PLAYER_FLAGS_CHANGED", -- Real event for AFK
    ["PLAYER_MOVE"] = "PLAYER_STARTED_MOVING" -- Real event for movement
}

local function RegisterQuirks(list)
    if not list then return end
    for _, quirk in ipairs(list) do
        -- Create a bucket for this event if it doesn't exist
        if not quirksByEvent[quirk.Event] then
            quirksByEvent[quirk.Event] = {}
            
            -- LOGIC: Only register if it's a REAL WoW event
            local realEvent = virtualEvents[quirk.Event]
            
            if realEvent then
                -- If it maps to a real event string (like AFK -> PLAYER_FLAGS_CHANGED), register that
                if type(realEvent) == "string" then
                    eventFrame:RegisterEvent(realEvent)
                end
                -- If it is just 'true' (like JUMP), we do nothing here (handled by hook)
            else
                -- Standard event, register normally
                pcall(function() eventFrame:RegisterEvent(quirk.Event) end)
            end
        end
        table.insert(quirksByEvent[quirk.Event], quirk)
    end
end

local function ProcessEvent(event, ...)
    local currentTime = GetTime()

    -- GLOBAL THROTTLE: Don't emote more than once every 5 seconds
    -- Exception: CHAT_MSG events (like responding to "troll") might need faster replies
    if (currentTime - lastEmoteTime) < 60 and not string_find(event, "CHAT_MSG") then 
        return 
    end

    local potentialQuirks = quirksByEvent[event]
    if not potentialQuirks then return end

    -- Shuffle the table slightly or just pick one? 
    -- For now, we iterate, but since we throttle, the first valid one wins.
    for _, quirk in ipairs(potentialQuirks) do
        -- Check Cooldown
        local cdEnd = quirkCooldowns[quirk.Name] or 0
        if currentTime >= cdEnd then
            -- Check Chance
            if math_random(1, 100) <= (quirk.Chance or 100) then
                -- Check Trigger Condition
                if SafeTrigger(quirk.Trigger, ...) then
                    
                    local emoteText = GetEmoteText(quirk.Emote, ...)
                    if emoteText then
                        SendChatMessage(emoteText, "EMOTE")
                        
                        -- Update Cooldowns
                        local cdDuration = quirk.Cooldown or 300
                        quirkCooldowns[quirk.Name] = currentTime + cdDuration
                        lastEmoteTime = currentTime
                        
                        -- Debug print (Only you see this)
                        -- print("|cffADD8E6[Quirk Triggered]:|r " .. quirk.Name)
                        
                        -- Stop processing other quirks for this event to prevent double-spam
                        return 
                    end
                end
            end
        end
    end
end

eventFrame:SetScript("OnEvent", function(self, event, ...)
    if event == "PLAYER_LOGIN" then
        -- [KEEP YOUR EXISTING PLAYER_LOGIN LOGIC HERE] 
        -- (I am abbreviating it to save space, but DO NOT DELETE the login logic inside)
        local _, playerClass = UnitClass("player")
        local _, playerRace = UnitRace("player")
        if not playerClass or not playerRace then return end
        
        print("|cffFFD700" .. addonName .. ":|r Detecting personality for " .. playerRace .. " " .. playerClass .. ".")

        if classQuirks and classQuirks[playerClass] then RegisterQuirks(classQuirks[playerClass]) end
        
        -- Dracthyr/Race fallback logic
        if racialQuirks and racialQuirks[playerRace] then
            RegisterQuirks(racialQuirks[playerRace])
        elseif playerRace == "Dracthyr" and racialQuirks["Dracthyr"] then
            RegisterQuirks(racialQuirks["Dracthyr"])
        end

        RegisterQuirks(globalQuirks)
        self:UnregisterEvent("PLAYER_LOGIN")

    -- TRANSLATION LAYER: Map Real Events to our Virtual Events
    elseif event == "PLAYER_FLAGS_CHANGED" then
        -- Check if we are actually AFK
        if UnitIsAFK("player") then
            ProcessEvent("AFK")
        end
    elseif event == "PLAYER_STARTED_MOVING" then
        ProcessEvent("PLAYER_MOVE")
    else
        -- Standard Event
        ProcessEvent(event, ...)
    end
end)

-- HOOK FOR JUMPING (This fixes the JUMP error)
hooksecurefunc("JumpOrAscendStart", function()
    ProcessEvent("JUMP")
end)

eventFrame:RegisterEvent("PLAYER_LOGIN")

-- Slash Commands for manual testing
SLASH_QUIRKTEST1 = "/quirktest"
SlashCmdList["QUIRKTEST"] = function()
    print("|cffFFD700" .. addonName .. ":|r Forcing a random quirk check...")
    ProcessEvent("PLAYER_REGEN_ENABLED") -- Fakes a "combat ended" event to test
end